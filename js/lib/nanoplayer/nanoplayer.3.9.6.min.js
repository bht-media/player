!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(1)},function(e,t,n){var i,r;i=[n(2),n(3),n(99),n(133),n(97),n(17),n(5),n(7)],r=function(e,t,n,i,r,o,a,s){"use strict";function c(t){if(!("string"==typeof t||t instanceof String))throw new Error('The param "playerDivId" must be of type "String"');this.version=e.NANOPLAYER,console.log("NanoPlayer api version: "+this.version),this.coreversion="",this.viewversion="",this.type="default",this.id="",this._playerDivId=t,this._core=null}var u=t.events,l=t.states,d=t.emptyConfig,f=t.pauseReasons,h=t.capabilities,E=n.events,p=n.emptyConfig,m=i.emptyConfig,y=c.prototype=Object.create(a.prototype);return y.setup=function(e){var t=this,n={};return o.extend(e,n),i.setup(n).then(function(e){return t._setup(e)})},y.destroy=function(){this.removeAllListeners(),this._view&&this._view.destroy(),this._core&&this._core.destroy()},y._setup=function(e){var n=this,i=m.create(),a=d.create(),s=p.create();return o.merge(e,i),o.clean(i),o.merge(e,a),o.clean(a),o.merge(e,s),o.clean(s),this._bintuConfig=i,this._coreConfig=a,this._viewConfig=s,new Promise(function(e,u){s.style&&s.style.view&&(n._initView(s),n._viewPropagator=r.create(n._view,c.viewEvents,n));try{var l=new t(n._playerDivId);n._corePropagator=r.create(l,c.coreEvents,n),n._setPublicListeners(a.events,n),n._connectLayers(),l.setup(a).then(function(t){n.coreversion=l.version,n.type=l.type,n.id=l.id,n._core=l,s.style&&s.style.view&&n._view.postSetup(l._realPlayer._mediaElementId),o.extend(i,t),o.extend(s,t),o.clean(t),e(t)},function(e){s.style&&s.style.view&&n._view.handleView(c.states.UNINITIALIZED),u(e)})}catch(e){s.style&&s.style.view&&n._view.handleView(c.states.UNINITIALIZED),u(e)}})},y._initView=function(e){this._view=new n,this._view.version=this.version,this.viewversion=this._view.version,this._view.setBaseValues(this._playerDivId),this._view.baseSetup(e)},y._setPublicListeners=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&"function"==typeof e[n]){var i=n.replace("on",""),r=e[n];t.on(i,r),delete e[n]}},y._removeAllListeners=function(){this.removeAllListeners()},y._connectLayers=function(){function e(e,t,n,i){for(var r in e)e.hasOwnProperty(r)&&t.indexOf(e[r])===-1&&n.on(e[r],i.bind(this))}var t=[c.coreEvents.MEDIA];e(c.coreEvents,t,this,this._onCoreEvent.bind(this)),e(c.viewEvents,[],this,this._onViewEvent.bind(this))},y._onCoreEvent=function(e){if(this._view){if(e.name===c.coreEvents.STATS)return void this._view.handleStats(e.data.stats);e.name===c.coreEvents.STATE_CHANGE&&this._view.update(e),e.name===c.coreEvents.STREAM_INFO&&this._view.handleStreamInfo(e),e.name!==c.coreEvents.MUTE&&e.name!==c.coreEvents.UNMUTE||this._view.handleMute(e.name===c.coreEvents.MUTE),e.name===c.coreEvents.VOLUME_CHANGE&&this._view.handleVolume(e.data.volume),e.name===c.coreEvents.METADATA&&this._view.handleMetaData(e)}},y._onViewEvent=function(e){e.name===c.viewEvents.PLAY?this._core.play():e.name===c.viewEvents.PAUSE&&this._core.pause(),e.name===c.viewEvents.MUTE?this._core.mute():e.name===c.viewEvents.UNMUTE&&this._core.unmute(),e.name===c.viewEvents.VOLUME_CHANGE&&this._core.setVolume(e.data.volume)},y._callMethod=function(){if(!this._core)throw new Error("Player not initialized!");this._core[arguments[0]].apply(this._core,Array.prototype.slice.call(arguments,1))},y.play=function(){this._callMethod("play")},y.pause=function(){this._callMethod("pause")},y.mute=function(){this._callMethod("mute")},y.unmute=function(){this._callMethod("unmute")},y.setVolume=function(e){this._callMethod("setVolume",e)},c.states=l,c.coreEvents=u,c.viewEvents=E,c.pauseReasons=f,c.capabilities=h,window.NanoPlayer=c,c}.apply(t,i),/**
	 * @license
	 * nanoStream Player
	 * Copyright (c) 2016 nanocosmos IT GmbH. All rights reserved.
	 * http://www.nanocosmos.de
	 * sales@nanocosmos.de
	 *
	 * LEGAL NOTICE:
	 * This material is subject to the terms and conditions defined in
	 * separate license conditions ('LICENSE.txt')
	 * All information contained herein is, and remains the property
	 * of nanocosmos GmbH and its suppliers if any. The intellectual and technical concepts
	 * contained herein are proprietary to nanocosmos GmbH, and are protected by trade secret
	 * or copyright law. Dissemination of this information or reproduction of this material
	 * is strictly forbidden unless prior written permission is obtained from nanocosmos.
	 * All modifications will remain property of nanocosmos.
	 */
!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return{NANOPLAYER:"3.9.6"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(4),n(6),n(19),n(11),n(20),n(14),n(16),n(97),n(98)],r=function(e,t,n,i,r,o,a,s,c){"use strict";function u(t){if(!("string"==typeof t||t instanceof String))throw new Error('The param "playerDivId" must be of type "String"');this.version=a.CORE,console.debug("NanoCore api version: "+this.version),this.type="default",this._playerDivId=t,this._dummyPlayer=new e(this._playerDivId),this._realPlayer=this._dummyPlayer}var l=u.prototype=Object.create(e.prototype);return l.setup=function(e){return new c(function(n,r){try{this._realPlayer&&this._realPlayer!==this._dummyPlayer&&(this._realPlayer.destroy(),this._realPlayer=this._dummyPlayer),t.create(this._playerDivId,e).then(function(t){this.version=t.version,this.type=t.type,this._realPlayer=t,this._propagator=s.create(t,i,this),this._realPlayer.setup(e).then(function(e){window.onbeforeunload=function(){this._realPlayer.destroy()}.bind(this),this.id=e.id,n(e)}.bind(this),r)}.bind(this),function(e){r(e)})}catch(e){r(e)}}.bind(this))},l.destroy=function(){this._realPlayer.destroy()},l.play=function(){this._realPlayer.play()},l.pause=function(){this._realPlayer.pause()},l.mute=function(){this._realPlayer.mute()},l.unmute=function(){this._realPlayer.unmute()},l.setVolume=function(e){this._realPlayer.setVolume(e)},u.events=i,u.states=r,u.emptyConfig=n,u.pauseReasons=o,u.version=a.CORE,u.capabilities=t.capabilities,u}.apply(t,i),/**
	 * @license
	 * nanoStream Player Core
	 * Copyright (c) 2016 nanocosmos IT GmbH. All rights reserved.
	 * http://www.nanocosmos.de
	 * sales@nanocosmos.de
	 *
	 * LEGAL NOTICE:
	 * This material is subject to the terms and conditions defined in
	 * separate license conditions ('LICENSE.txt')
	 * All information contained herein is, and remains the property
	 * of nanocosmos GmbH and its suppliers if any. The intellectual and technical concepts
	 * contained herein are proprietary to nanocosmos GmbH, and are protected by trade secret
	 * or copyright law. Dissemination of this information or reproduction of this material
	 * is strictly forbidden unless prior written permission is obtained from nanocosmos.
	 * All modifications will remain property of nanocosmos.
	 */
!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(5)],r=function(e){"use strict";function t(){this.version=void 0,this.type=void 0}var n=t.prototype=Object.create(e.prototype);return n.setup=function(){throw new Error('"setup" must be implemented or player not initialized')},n.destroy=function(){throw new Error('"destroy" must be implemented or player not initialized')},n.play=function(){throw new Error('"play" must be implemented or player not initialized by call setup')},n.pause=function(){throw new Error('"pause" must be implemented or player not initialized by call setup')},n.mute=function(){throw new Error('"mute" must be implemented or player not initialized by call setup')},n.unmute=function(){throw new Error('"unmute" must be implemented or player not initialized by call setup')},n.setVolume=function(){throw new Error('"setVolume" must be implemented or player not initialized by call setup')},t.isSupported=function(){return!1},t.techName="",t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype;return i.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&t(r[i],n)===-1&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(i=t(o[r],n),i!==-1&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):a.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,i,r,o,a,s=this.getListenersAsObject(e);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),r=n.length;r--;)i=n[r],i.once===!0&&this.removeListener(e,i.listener),a=i.listener.apply(this,t||[]),a===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return t.length?t.length&&"object"!=typeof t[0]?t[0]={name:e,data:t[0]}:t.length&&!t[0].hasOwnProperty("data")?t[0]={name:e,data:t[0]}:t[0].name=e:t.push({name:e,data:{}}),this.emitEvent(e,t)},i.emitSimple=function(e,t,n){return this.emitEvent(e,[{name:e||"AnonymousEvent",target:n||this,data:t||{}}])},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},e}.apply(t,i),/*!
	 * EventEmitter v4.2.11 - git.io/ee
	 * Unlicense - http://unlicense.org/
	 * Oliver Caldwell - http://oli.me.uk/
	 * @preserve
	 */
!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(7),n(8),n(96),n(13)],r=function(e,t,n,i){function r(e){var t=e.filter(function(e){return e.isSupported()});if(!t.length)throw new Error(n.CLIENT_NOT_SUPPORTED);return t}function o(e,t){var r={};r[i.H5LIVE_WSS]="h5live",r[i.H5LIVE_HLS]="h5live",r[i.FLASH]="h5live",r[i.NATIVE]="hls";var o=[],a=e.filter(function(e){return o.push(r[e.techName]),t.hasOwnProperty("source")&&t.source.hasOwnProperty(r[e.techName])});if(!a.length)throw new Error(n.SOURCE_NOT_SUPPORTED);return a}function a(e,t){var i=[],r=function(e,t){return e.indexOf(t)!==-1||t.indexOf(e)!==-1},o=e.filter(function(e){return i.push(e.techName),!t.playback.forceTech||r(e.techName,t.playback.forceTech)});if(!o.length)throw new Error(n.FORCE_NOT_SUPPORTED.replace("$tech$",t.playback.forceTech));return o}function s(e,t){var n=e[0];return new n(t)}function c(e,n){return new Promise(function(i,c){var u=t;try{u=r(u),u=o(u,n),u=a(u,n),i(s(u,e))}catch(e){c(e)}})}return{create:c,capabilities:t.filter(function(e){return e.isSupported()}).map(function(e){return e.techName})}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";var e="Unknown",t="";if(screen.width){var n=screen.width?screen.width:"",i=screen.height?screen.height:"";t+=""+n+" x "+i}var r,o,a,s=navigator.appVersion,c=navigator.userAgent,u=navigator.appName,l=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10);(o=c.indexOf("Opera"))!==-1&&(u="Opera",l=c.substring(o+6),(o=c.indexOf("Version"))!==-1&&(l=c.substring(o+8))),(o=c.indexOf("OPR/"))!==-1?(u="Opera",l=c.substring(o+4)):(o=c.indexOf("MSIE"))!==-1?(u="Microsoft Internet Explorer",l=c.substring(o+5)):"Netscape"===u&&(o=c.indexOf("Trident/"))!==-1?(u="Microsoft Internet Explorer",l=c.substring(o+8),(o=c.indexOf("rv:"))!==-1&&(l=c.substring(o+3))):"Netscape"===u&&(o=c.indexOf("Edge/"))!==-1?(u="Microsoft Edge",l=c.substring(o+5)):(o=c.indexOf("Chrome"))!==-1?(u="Chrome",l=c.substring(o+7)):(o=c.indexOf("PhantomJS"))!==-1?(u="PhantomJS",l=c.substring(o+10)):(o=c.indexOf("Safari"))!==-1?(u="Safari",l=c.substring(o+7),(o=c.indexOf("Version"))!==-1&&(l=c.substring(o+8)),c.indexOf("CriOS")!==-1&&(u="Chrome")):(o=c.indexOf("Firefox"))!==-1?(u="Firefox",l=c.substring(o+8)):(r=c.lastIndexOf(" ")+1)<(o=c.lastIndexOf("/"))&&(u=c.substring(r,o),l=c.substring(o+1),u.toLowerCase()===u.toUpperCase()&&(u=navigator.appName)),(a=l.indexOf(";"))!==-1&&(l=l.substring(0,a)),(a=l.indexOf(" "))!==-1&&(l=l.substring(0,a)),(a=l.indexOf(")"))!==-1&&(l=l.substring(0,a)),d=parseInt(""+l,10),isNaN(d)&&(l=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10));var f=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(s),h=!!navigator.cookieEnabled;"undefined"!=typeof navigator.cookieEnabled||h||(document.cookie="testcookie",h=document.cookie.indexOf("testcookie")!==-1);var E=e,p=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var m in p){var y=p[m];if(y.r.test(c)){E=y.s;break}}var _=e;switch(/Windows/.test(E)&&(/Windows (.*)/.exec(E)&&(_=/Windows (.*)/.exec(E)[1]),E="Windows"),E){case"Mac OS X":/Mac OS X (10[._\d]+)/.exec(c)&&(_=/Mac OS X (10[._\d]+)/.exec(c)[1]);break;case"Android":/Android ([._\d]+)/.exec(c)&&(_=/Android ([._\d]+)/.exec(c)[1]);break;case"iOS":_=/OS (\d+)_(\d+)_?(\d+)?/.exec(s),_=_?_[1]+"."+_[2]+"."+(0|_[3]):e}var T={screen:t,browser:u,browserVersion:l,mobile:f,os:E,osVersion:_,cookies:h};return T}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(9),n(91),n(92),n(93)],r=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(10),n(7),n(11),n(12),n(13),n(14),n(15),n(38),n(27)],r=function(e,t,n,i,r,o,a,s,c){"use strict";function u(e){if(!("string"==typeof e||e instanceof String))throw new Error('The param "playerDivId" must be of type "String"');this._setBaseValues(e)}var l=e.log;u.isSupported=function(){return"iOS"!==t.os&&!!window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')},u.techName=r.H5LIVE_WSS;var d=u.prototype=Object.create(a.prototype);return d.setup=function(e){return new Promise(function(t,i){try{if("undefined"!=typeof e){var r=this._baseSetup(u.techName,e);r?i(r):(setTimeout(function(){this._setState(this.STATE.READY),this._emit(n.READY,{config:this.config}),this.config.playback.autoplay&&this.play()}.bind(this),20),t(this.config))}else i(Error("No config passed"))}catch(e){i(e)}}.bind(this))},d.destroy=function(){this._destroy()},d.play=function(){var e=arguments.length?arguments[0]:0;l("nanoplayer ("+this._playerDivId+"): play in state "+this.state,1),this.state<this.STATE.READY?this._emitError(i.PLAYER.NOT_CONFIGURED,"Could not play because player has not been configured."):this.state===this.STATE.READY||this.state===this.STATE.PAUSED?(this._playing=!0,e?setTimeout(function(){this.state===this.STATE.LOADING&&(this._componentEmitter.emit(s.PLAY),this._componentEmitter.emit(c.PLAY))}.bind(this),e):(this._componentEmitter.emit(s.PLAY),this._componentEmitter.emit(c.PLAY)),this._preparePlay(e)):this.state===this.STATE.PAUSING&&(l("nanoplayer ("+this._playerDivId+"play in PAUSING state, setting flag to resume"),this._resumeOnPause=!0)},d.pause=function(){var e=arguments.length?arguments[0]:0;l("nanoplayer ("+this._playerDivId+"): pause in state "+this.state,2),this.state<this.STATE.READY?this._emitError(i.PLAYER.NOT_PLAYING,"Could not pause because player was not in playing state before."):this.state!==this.STATE.PAUSED&&this.state!==this.STATE.PAUSING&&(this._pauseReason=this._getPauseReason(e),this._setState(this.STATE.PAUSING),this._playing=!1,this._resumeOnPause=!1,this._componentEmitter.emit(s.PAUSE),this._componentEmitter.emit(c.PAUSE),this._triggerPause())},u}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e=function(){function e(){var e=isNaN(n("debug"))?0:+n("debug"),i=+t("nanoDebug");return Math.max(e,i)}function t(e){return document.cookie.indexOf(e+"=")!==-1?document.cookie.split(e+"=")[1].split(";")[0]:null}function n(e){if(!o){o=[];var t=document.location.search.substr(1,document.location.search.length);if(""===t&&document.location.href.indexOf("?")!==-1){var n=document.location.href.indexOf("?")+1;t=document.location.href.slice(n)}if(""!==t)for(var i=t.split("&"),r=0;r<i.length;++r){var a="",s=i[r].split("="),c=s[0];s.length>1&&(a=s[1]),o[decodeURIComponent(c)]=decodeURIComponent(a)}}try{return o[e]}catch(e){return}}function i(){return(new Date).toISOString()}var r=e(),o=void 0;setInterval(function(){r=e()},5e3);var a=function(e,t){try{r>=t&&console.debug(i()+": "+e)}catch(e){}};return{log:a,getHTTPParam:n}}();return e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({READY:"Ready",ERROR:"Error",PAUSE:"Pause",LOADING:"Loading",START_BUFFERING:"StartBuffering",STOP_BUFFERING:"StopBuffering",PLAY:"Play",METADATA:"MetaData",STATS:"Stats",PLAYBACK_FINISHED:"PlaybackFinished",MEDIA:"Media",STREAM_INFO:"StreamInfo",MUTE:"Mute",UNMUTE:"Unmute",VOLUME_CHANGE:"VolumeChange",STATE_CHANGE:"StateChange",WARNING:"Warning"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({PLAYER:{NO_RTMP_URL_SET:1001,NO_SERVER_SET:1002,NOT_CONFIGURED:1003,NOT_PLAYING:1004,INTERACTION_REQUIRED:1005,BUFFER_CONFIG_INVALID:1006,PLAYBACK_SUSPENDED:1007,PLAYBACK_ERROR:1008},STREAM:{NOT_FOUND:2001,MEDIA_NOT_AVAILABLE:2002,METADATA_STILL_PROCESSING:2014,METADATA_NO_START_INDEX:2013,METADATA_INVALID_JSON:2012,METADATA_WRONG_INDEX:2011},MEDIA:{ABORTED:3001,DOWNLOAD_ERROR:3002,DECODE_ERROR:3003,NOT_SUPPORTED:3004},NETWORK:{COULD_NOT_ESTABLISH_CONNECTION:4001,CONNECTION_ERROR:4002,MAX_RECONNECTS_REACHED:4003,RECONNECTION_CONFIG_INVALID:4004}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({FLASH:"flash",NATIVE:"hls.native",H5LIVE_WSS:"h5live",H5LIVE_HLS:"h5live.hls"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({NORMAL:"normal",BUFFER:"buffer",CONNECTION_CLOSE:"connectionclose",SERVER_NOT_FOUND:"servernotfound",STREAM_NOT_FOUND:"streamnotfound",INTERACTION_REQUIRED:"interactionrequired",PLAYBACK_SUSPENDED:"playbacksuspended",PLAYBACK_ERROR:"playbackerror",RECONNECTION_IMMINENT:"reconnectionimminent"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(4),n(22),n(16),n(7),n(10),n(17),n(5),n(18),n(19),n(20),n(21),n(11),n(12),n(13),n(24),n(25),n(26),n(32),n(35),n(52),n(61),n(27),n(29),n(28),n(30),n(14)],r=function(e,t,n,i,r,o,a,s,c,u,l,d,f,h,E,p,m,y,_,T,v,g,A,S,N,R){"use strict";function O(){}var I=r.log,C=O.prototype=Object.create(e.prototype);return C._setBaseValues=function(e){this.version=n.CORE,this.type="h5live",this.id=Math.round(1e11*Math.random()).toString(),this.networkState=this.NETWORK_STATE.UNINITIALIZED,this._info=i,this.config=c.create(),this._playerDivId="",this._playing=!1,this._streamInfo=null,this._pauseReason="",this._playerDivId=e,this._mediaElementId="h5live-"+e,this._componentEmitter=new a,this._componentListeners={logic:[{type:A.LOADING_TIMEOUT,listener:this._onLoadingTimeout.bind(this)},{type:A.BUFFERING_TIMEOUT,listener:this._onBufferingTimeout.bind(this)},{type:A.SERVER_INFO,listener:this._onServerInfo.bind(this)},{type:A.STREAM_INFO,listener:this._onStreamInfo.bind(this)},{type:A.NO_KEEP_CONNECTION,listener:this._onNoKeepConnection.bind(this)},{type:A.MIME_TYPE_UNSUPPORTED,listener:this._onMimeTypeUnsupported.bind(this)}],network:[{type:N.CONNECTING,listener:this._onConnectionConnecting.bind(this)},{type:N.CONNECTED,listener:this._onConnectionOpen.bind(this)},{type:N.DISCONNECTED,listener:this._onConnectionClosed.bind(this)},{type:N.RECONNECTING,listener:this._onConnectionReconnecting.bind(this)},{type:N.RECONNECTION_IMMINENT,listener:this._onConnectionReconnectionImminent.bind(this)},{type:N.DESTROYED,listener:this._onConnectionDestroyed.bind(this)},{type:N.INITIALIZATION_ERROR,listener:this._onConnectionInitializationError.bind(this)},{type:N.ERROR,listener:this._onConnectionError.bind(this)}],media:[{type:S.ERROR,listener:this._onError.bind(this)},{type:S.PLAYBACK_ERROR,listener:this._onMediaError.bind(this)},{type:S.PLAYBACK_STARTED,listener:this._onMediaPlaying.bind(this)},{type:S.PLAYBACK_SUSPENDED,listener:this._onMediaSuspended.bind(this)},{type:S.BUFFERING,listener:this._onMediaBuffering.bind(this)},{type:S.PLAY_START_ERROR,listener:this._onPlayStartError.bind(this)}]},this._setState(this.STATE.IDLE)},C._baseSetup=function(e,n){o.merge(n,this.config),o.clean(this.config);var i;if(i=this._validateConfig(e,n))return i;n.playback.videoId&&(this._mediaElementId=n.playback.videoId),this._setListeners(this.config.events,this);var r=document.getElementById(this._playerDivId);this._metaDataEnabled=this.config.playback.metadata,"string"==typeof this.config.source.h5live.rtmp&&(this.config.source.h5live.rtmp=this._parseUrl(this.config.source.h5live.rtmp)),this.config.url=this.config.source.h5live.rtmp.url+"/"+this.config.source.h5live.rtmp.streamname,this.config.type=this.type,this.config.id=this.id,this._components={network:T.create(this._componentEmitter),media:v.create(this._componentEmitter),logic:_.create(this._componentEmitter),performance:y.create(this._componentEmitter,this._playerDivId),propagator:m.create(this._componentEmitter,this)};for(var a in this._components)this._componentListeners.hasOwnProperty(a)&&this._componentListeners[a].length&&t.add({target:this._componentEmitter,listeners:this._componentListeners[a]});return this._emitConfig(),this._setupVideoElement(r),i},C._destroy=function(){this.removeAllListeners();for(var e in this._components)this._components.hasOwnProperty(e)&&(this._components[e].destroy(),delete this._components[e]);for(var n in this._componentListeners)this._componentListeners.hasOwnProperty(n)&&this._componentListeners[n].length&&t.remove({target:this._componentEmitter,listeners:this._componentListeners[n]})},C._validateConfig=function(e,t){var n=t.source.h5live;if(!n.rtmp||!n.rtmp.url||!n.rtmp.streamname)return new Error(p.CONFIG_RTMP);if(!(n.server&&(n.server.websocket||n.server.hls)||n.token))return new Error(p.CONFIG_TOKEN);if(e===h.H5LIVE_WSS&&n.server&&!n.server.websocket)return new Error(p.CONFIG_WSS);if(e===h.H5LIVE_HLS){if(n.server&&!n.server.hls)return new Error(p.CONFIG_HLS);if(t.playback.metadata&&!n.server.websocket)return new Error(p.CONFIG_METADATA)}return!1},C._emitConfig=function(){this._componentEmitter.emit(g.CONFIG,{config:s.copy(this.config)})},C._setState=function(e){var t=arguments.length>1?arguments[1]:{};this.state=e,t.state=e,this._componentEmitter.emit(A.STATE_CHANGE,t),this._emit(d.STATE_CHANGE)},C._debug=function(e,t){I("nanoplayer ("+this._playerDivId+"): "+e,t)},C._setListeners=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&"function"==typeof e[n]){var i=n.replace("on",""),r=e[n];t.on(i,r)}},C._setupVideoElement=function(e){this._componentEmitter.emit(g.CREATE_VIDEO,{elementId:this._mediaElementId,container:e})},C._onPlayStartError=function(e){switch(this._debug(e.data.error.name+": "+e.data.error.message,1),e.data.error.name){case"NotAllowedError":this._setState(this.STATE.PLAYBACK_NOT_STARTED),this._emitError(f.PLAYER.INTERACTION_REQUIRED,"Playback must be initialized by user gesture."),this.pause(this.state)}},C._onError=function(e){if(this.state!==this.STATE.PAUSING&&this.state!==this.STATE.PAUSED){var t="",n=e.data.code;switch(n){case MediaError.MEDIA_ERR_ABORTED:t="A fetching process of the media aborted by user";break;case MediaError.MEDIA_ERR_NETWORK:t="An error occurred when downloading media";break;case MediaError.MEDIA_ERR_DECODE:t="An error occurred when decoding media";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:t="The received audio/video is not supported";break;default:t="An unknown media error occurred"}this._debug('error media with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',3),this._debug("error message: "+t,3),this._setState(this.STATE.PLAYBACK_ERROR),this._emitError(n+3e3,t),this.pause(this.state),n===MediaError.MEDIA_ERR_DECODE&&setTimeout(this.play.bind(this),1e3)}},C._preparePlay=function(e){this._setState(this.STATE.LOADING,{connectDelay:e}),this._emit(d.LOADING,{connectDelay:e})},C._onConnectionInitializationError=function(e){this._debug('error init connection with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',2),this.networkState=e.connectionState;var t="Connection initialization error.",n=e?e.data:void 0;n&&n.message&&(t=n.message),n&&n.code&&(t+=" (code:"+n.code+")"),n&&n.name&&(t=n.name+": "+t),this._emitError(f.NETWORK.COULD_NOT_ESTABLISH_CONNECTION,t),this._setState(this.STATE.CONNECTION_ERROR),this.pause(this.state)},C._onConnectionError=function(e){this._debug('error connection with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',2),this.networkState=e.connectionState;var t="Connection error.",n=e?e.data:void 0;n&&n.message&&(t=n.message),n&&n.code&&(t+=" (code:"+n.code+")"),n&&n.name&&(t=n.name+": "+t),this._emitError(f.NETWORK.CONNECTION_ERROR,t),this._setState(this.STATE.CONNECTION_ERROR),this.pause(this.state)},C._onConnectionConnecting=function(e){this._debug("connecting",1),this.networkState=e.connectionState},C._onConnectionOpen=function(e){e.data.count?this._debug("connection open after "+e.data.count+" reconnect tries",1):this._debug("connection open",1),this.networkState=e.connectionState},C._onConnectionClosed=function(e){this._debug("connection closed",1),this.networkState=e.connectionState;var t;t=E.hasOwnProperty(+e.data.code)?E[+e.data.code]:"Unknown reason";var n=e.data.code;n>1e3&&n<4e3&&(n+=3100),this._debug('closed connection with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',2),n>4e3&&this._emitError(n,t),this.pause(this.state)},C._onConnectionDestroyed=function(e){this._debug("connection destroyed",1),this.networkState=e.connectionState,this.state!==this.STATE.READY&&this._triggerPause()},C._onConnectionReconnecting=function(e){this._debug("reconnect attempt "+e.data.count+" started",1),this.networkState=e.connectionState},C._onConnectionReconnectionImminent=function(e){var t=e.data.code;t>1e3&&t<4e3&&(t+=3100),this._debug("connection "+e.data.count+(e.data.count>1?" times":" time")+" unexpectedly closed with code "+t+", but a reconnect will be prepared",1),this._debug("reconnect attempt "+e.data.count+" starts in "+Math.round(e.data.delay)+" ms",1),("iOS"!==i.os||"iOS"===i.os&&e.data.count>1)&&this._emitWarning("Connection error: closed "+e.data.count+(e.data.count>1?" times":" time")+" unexpectedly with code "+t+", but a reconnect will be prepared in "+(e.data.delay/1e3).toFixed(3)+" s"),this.networkState=e.connectionState,this._playing&&"iOS"!==i.os&&(this._setState(this.STATE.RECONNECTION_IMMINENT),this.pause(this.state),this.play(e.data.delay))},C._onServerInfo=function(e){this._debug("onServerInfo",2);try{var t=JSON.stringify(e.data);this._debug(""+t,3)}catch(e){}},C._onStreamInfo=function(e){this._debug("onStreamInfo",2),this._emit(d.STREAM_INFO,e.data)},C._onNoKeepConnection=function(e){this._debug("onNoKeepConnection",2),this._emitWarning(e.data.message)},C._onMimeTypeUnsupported=function(){this._setState(this.STATE.PLAYBACK_ERROR),this._emitError(f.MEDIA.NOT_SUPPORTED,"The received audio/video is not supported"),this.pause(this.state)},C._onMediaError=function(e){this._setState(this.STATE.PLAYBACK_ERROR),this._emitError(f.PLAYER.PLAYBACK_ERROR,e.data),this.pause(this.state)},C._onMediaSuspended=function(){this._setState(this.STATE.PLAYBACK_SUSPENDED),this._emitError(f.PLAYER.PLAYBACK_SUSPENDED,"Playback suspended by external reason."),this.pause(this.state)},C._emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.id=this.id,n.version=this.version,n.state=this.state,"Error"===e&&n.data.code&&n.data.message&&this._debug("error "+n.data.code+" "+n.data.message,1),this.emit(n.name,n)},C._emitError=function(e,t){this._emit(d.ERROR,{code:e,message:t})},C._emitWarning=function(e){this._emit(d.WARNING,{message:e})},C._getPauseReason=function(e){var t="";if(e){var n=this.networkState!==this.NETWORK_STATE.OPEN&&this.networkState!==this.NETWORK_STATE.UNINITIALIZED;switch(e){case this.STATE.READY:t=R.SERVER_NOT_FOUND;break;case this.STATE.LOADING:t=n?R.CONNECTION_CLOSE:R.STREAM_NOT_FOUND;break;case this.STATE.BUFFERING:t=n?R.CONNECTION_CLOSE:R.BUFFER;break;case this.STATE.UNKNOWN:t=n?R.CONNECTION_CLOSE:R.UNKNOWN;break;case this.STATE.PLAYING:t=n?R.CONNECTION_CLOSE:R.NORMAL;break;case this.STATE.PLAYBACK_NOT_STARTED:t=R.INTERACTION_REQUIRED;break;case this.STATE.PLAYBACK_SUSPENDED:t=R.PLAYBACK_SUSPENDED;break;case this.STATE.PLAYBACK_ERROR:t=R.PLAYBACK_ERROR;break;case this.STATE.RECONNECTION_IMMINENT:t=R.RECONNECTION_IMMINENT;break;case this.STATE.CONNECTION_ERROR:t=R.CONNECTION_CLOSE;break;default:t=R.NORMAL}}else t=R.NORMAL;return t},C._triggerPause=function(){return this.state===this.STATE.PAUSED?void I("nanoplayer ("+this._playerDivId+"): trigger pause but already in state paused"):(I("nanoplayer ("+this._playerDivId+'): trigger pause with reason "'+this._pauseReason+'", state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',3),this._setState(this.STATE.PAUSED),this._emit(d.PAUSE,{reason:this._pauseReason}),void(this._resumeOnPause&&(this._resumeOnPause=!1,this.play())))},C.mute=function(){this._componentEmitter.emit(g.MUTE)},C.unmute=function(){this._componentEmitter.emit(g.UNMUTE)},C.setVolume=function(e){this._componentEmitter.emit(g.SET_VOLUME,{volume:e})},C._parseUrl=function(e){var t={url:"",streamname:""},n=e.lastIndexOf("/"),i=e.substr(0,n),r=e.substr(n,e-n);return t.url=i,t.streamname=r,t},C._parseJSON=function(e){var t=null;try{t=JSON.parse(e)}catch(e){t=null}return t},C._getState=function(){for(var e in this.STATE)if(this.STATE.hasOwnProperty(e)&&this.STATE[e]===this.state)return e},C._getNetworkState=function(){for(var e in this.NETWORK_STATE)if(this.NETWORK_STATE.hasOwnProperty(e)&&this.NETWORK_STATE[e]===this.networkState)return e},C._onMediaPlaying=function(){var e=this.state;this._setState(u.PLAYING),this._emit(e===u.BUFFERING?d.STOP_BUFFERING:d.PLAY),this._debug("state is PLAYING")},C._onMediaBuffering=function(){this._setState(u.BUFFERING),this._emit(d.START_BUFFERING)},C._isIEorEdge=function(){return"Microsoft Internet Explorer"===this._info.browser||"Microsoft Edge"===this._info.browser},C._onLoadingTimeout=function(){this._emitError(f.STREAM.NOT_FOUND,"The requested stream can not be found."),this.pause(this.state)},C._onBufferingTimeout=function(){this._emitError(f.STREAM.MEDIA_NOT_AVAILABLE,"No media available"),this.pause(this.state)},C.STATE=u,C.NETWORK_STATE=l,C.PAUSE_REASON=R,O}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return{CORE:"3.9.6"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(t,n){var i;for(i in t)t.hasOwnProperty(i)&&n.hasOwnProperty(i)&&("object"==typeof t[i]?e(t[i],n[i]):n[i]=t[i])}function t(e,n){var i;for(i in e)e.hasOwnProperty(i)&&(!n[i]&&(n[i]={}),"object"==typeof e[i]?t(e[i],n[i]):n[i]=e[i])}function n(e){var t;for(t in e)e.hasOwnProperty(t)&&("undefined"==typeof e[t]||"string"==typeof e[t]&&0===e[t].length)&&delete e[t],e.hasOwnProperty(t)&&e[t]instanceof Object&&n(e[t]);for(t in e)(e.hasOwnProperty(t)&&("undefined"==typeof e[t]||"string"==typeof e[t]&&0===e[t].length)||"object"==typeof e[t]&&"function"!=typeof e[t]&&0===Object.keys(e[t]).length)&&delete e[t]}function i(e,t,n,r){var o,a=(n=n||0)&&n>0;for(o in e){if(r=r&&a?r:"",!t.hasOwnProperty(o))return Error('The property "'+r+o+'" is not a valid config property');if(e[o]instanceof Object&&t[o]instanceof Object){n++;var s=i(e[o],t[o],n,r+=o+".");if(null!==s)return s}else{if(typeof e[o]!==t[o])return Error('The property "'+r+o+'" must be of type "'+t[o]+'"');n=0}}return null}return{merge:e,clean:n,check:i,extend:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(n){var i;switch(typeof n){case"object":if(null===n)i=null;else switch(t.call(n)){case"[object Array]":i=n.map(e);break;case"[object Date]":i=new Date(n);break;case"[object RegExp]":i=new RegExp(n);break;default:i=Object.keys(n).reduce(function(t,i){return t[i]=e(n[i]),t},{})}break;default:i=n}return i}var t=Object.prototype.toString;return{copy:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{playback:{autoplay:!0,muted:!1,metadata:!1,forceTech:"",flashplayer:"",videoId:void 0,keepConnection:!1,reconnect:{minDelay:2,maxDelay:10,delaySteps:10,maxRetries:10}},source:{hls:"",h5live:{server:{websocket:"",progressive:"",hls:""},token:"",rtmp:{url:"",streamname:""},security:{token:"",expires:"",options:"",tag:""}}},events:{onReady:void 0,onPlay:void 0,onPause:void 0,onLoading:void 0,onStartBuffering:void 0,onStopBuffering:void 0,onError:void 0,onMetaData:void 0,onFullscreenEnter:void 0,onFullscreenExit:void 0,onPlaybackFinished:void 0,onMedia:void 0,onStats:void 0,onMute:void 0,onUnmute:void 0,onVolumeChange:void 0,onStreamInfo:void 0,onWarning:void 0},tweaks:{buffer:{min:void 0,start:void 0,max:void 0,target:void 0,limit:void 0},bufferDynamic:{offsetThreshold:void 0,offsetStep:void 0,cooldownTime:void 0}}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({UNINITIALIZED:1,IDLE:2,READY:3,LOADING:4,PLAYING:5,PAUSED:6,BUFFERING:7,UNKNOWN:8,PLAYBACK_NOT_STARTED:9,PLAYBACK_SUSPENDED:10,PAUSING:11,PLAYBACK_ERROR:12,RECONNECTION_IMMINENT:13,CONNECTION_ERROR:14})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({UNINITIALIZED:1,CONNECTING:2,OPEN:3,CLOSING:4,CLOSED:5})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(23)],r=function(e){"use strict";function t(t){if(!t.target)throw new Error(e.NO_TARGET);if(!t.listeners||!t.listeners.length)throw new Error(e.NO_LISTENERS);if(!n(t.target,o)||!n(t.target,a))throw new Error(e.NOT_DISPATCHER);for(var i=0;i<t.listeners.length;++i)if(!t.listeners[i].type&&"string"!=typeof t.listeners[i].type||0!==t.listeners[i].type.length){if(!t.listeners[i].type)throw new Error(e.MISSING_TYPE.replace("%index%",i));if("function"!=typeof t.listeners[i].listener)throw new Error(e.MISSING_LISTENER.replace("%index%",i))}else t.listeners.splice(i,1),i--}function n(e,t){for(var n=0;n<t.length;++n)if("function"==typeof e[t[n]])return e[t[n]];return null}function i(e,i){t(i),r(n(i.target,e),i.target,i.listeners)}function r(e,t,n){for(var i=0;i<n.length;++i)e.call(t,n[i].type,n[i].listener)}var o=["addEventListener","addListener","on"],a=["removeEventListener","removeListener","off"];return{add:i.bind(null,o),remove:i.bind(null,a)}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({NO_TARGET:"No target in config",NO_LISTENERS:"No listeners in config",NOT_DISPATCHER:"Target is not an event dispatcher",MISSING_TYPE:"Missing type in listener #%index%",MISSING_LISTENER:"Missing/invalid listener in listener #%index%"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({1000:"Normal closure, meaning that the purpose for which the connection was established has been fulfilled.",1001:'An endpoint is "going away", such as a server going down or a browser having navigated away from a page.',1002:"An endpoint is terminating the connection due to a protocol error",1003:"An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message).",1004:"Reserved. The specific meaning might be defined in the future.",1005:"No status code was actually present.",1006:"Maybe no network, wrong url or server down.",1007:"An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [http://tools.ietf.org/html/rfc3629] data within a text message).",1008:'An endpoint is terminating the connection because it has received a message that "violates its policy". This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.',1009:"An endpoint is terminating the connection because it has received a message that is too big for it to process.",1011:"A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.",1015:"The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).",4400:"Bad request. Maybe stream parameters are missing or malformed.",4403:"Access denied. The authentication token is missing or invalid.",4500:"The connection has been rejected due an internal server error.",4503:"The requested service is currently unavailable.",4900:"The security service has been rejected due an internal server error.",4901:"The security service denied access. The authentication token is invalid.",4903:"The security service denied access. The url is expired or a token parameter is missing (expires, token, or options).",4904:"The security service can not be found."})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({CONFIG_RTMP:"Configuration error. Could not create player, the rtmp configuration is missing or incomplete. Add an rtmp url and streamname to the configuration.",CONFIG_TOKEN:"Configuration error. Could not create player, with this configuration an security token is required. Add an token to the configuration.",CONFIG_WSS:"Configuration error. Could not create player, the websocket server configuration is missing.",CONFIG_HLS:"Configuration error. Could not create player, the hls server configuration is missing.",CONFIG_METADATA:"Configuration error. Could not create player, the websocket server configuration for metadata is missing."})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(22),n(12),n(11),n(27),n(28),n(29),n(30),n(31)],r=function(e,t,n,i,r,o,a,s){function c(i,c){function u(){e.add({target:i,listeners:S}),N.forEach(function(e){i.addListener(e.event,f)})}function l(){e.remove({target:i,listeners:S}),N.forEach(function(e){i.removeListener(e.event,f)})}function d(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=c._playerDivId,n.state=c.state,"Error"===e&&n.data.code&&n.data.message&&v.debug("error "+n.data.code+" "+n.data.message),c.emit(n.name,n)}function f(e){var t,n;N.forEach(function(i){i.event===e.name&&(t=i.code?i.code:e.data.code,n=i.message?i.message:e.data.reason,i.defer?setTimeout(h.bind(this,t,n),0):h(t,n))})}function h(e,t){d(n.ERROR,{code:e,message:t})}function E(e){var t;T&&T.quality&&(t=T.quality),T=e.data.stats,t&&!T.quality&&(T.quality=t);var i,r="stats error";try{r=JSON.stringify(T),i=JSON.parse(r),delete i.buffer.update,delete i.buffer.delay.before}catch(e){}d(n.STATS,{stats:i})}function p(e){T||(T={}),T.quality=e.data}function m(e){v.debug("mediaSource "+(e.type===r.SOURCE_ENDED?"ended":"closed")+", readyState: "+e.data.readyState),d(n.PLAYBACK_FINISHED)}function y(e){e.data.muted!==A?(A=e.data.muted,d(A?n.MUTE:n.UNMUTE,{volume:g})):e.data.volume!==g&&(g=e.data.volume,d(n.VOLUME_CHANGE,{volume:g}))}function _(e){setTimeout(d.bind(this,n.METADATA,e.data),0)}var T,v=s.create("FacadePropagator"),g=1,A=!1,S=[{type:r.VOLUME_CHANGE,listener:y},{type:r.QUALITY_STATS,listener:p},{type:r.PLAY_STATS,listener:E},{type:r.SOURCE_ENDED,listener:m},{type:r.SOURCE_CLOSED,listener:m},{type:o.META_DATA_RECEIVED,listener:_}],N=[{event:o.META_DATA_ERROR,code:null,message:null,defer:!0},{event:o.MISSING_RTMP_ERROR,code:t.PLAYER.NO_RTMP_URL_SET,message:"No rtmp url set.",defer:!1},{event:o.NO_SERVER_ERROR,code:t.PLAYER.NO_SERVER_SET,message:"No server set.",defer:!1},{event:a.RECONNECTION_CONFIG_INVALID,code:t.NETWORK.RECONNECTION_CONFIG_INVALID,message:null,defer:!0},{event:r.BUFFER_TWEAKS_ERROR,code:t.PLAYER.BUFFER_CONFIG_INVALID,message:null,defer:!1}];return u(),{destroy:l}}return{create:c}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="control.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",NETWORK_PLAY:e+"networkPlay",NETWORK_PAUSE:e+"networkPause",PLAY:e+"play",PAUSE:e+"pause",MUTE:e+"mute",UNMUTE:e+"unmute",SET_VOLUME:e+"setVolume",SEEK:e+"seek",SET_RATE:e+"playbackRate",CONFIG:e+"config",CREATE_VIDEO:e+"createVideo",DESTROY_VIDEO:e+"destroyVideo",
VIDEO_SOURCE:e+"videoSource"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="media.";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",ELEMENT_CREATED:e+"elementCreated",QUALITY_STATS:e+"qualitystats",PLAY_STATS:e+"playStats",FRAME_DROP:e+"framedrop",SOURCE_OPEN:e+"sourceopen",SOURCE_ENDED:e+"sourceended",SOURCE_CLOSED:e+"sourceclosed",PLAYBACK_ERROR:e+"playbackError",PLAYBACK_STARTED:e+"playbackStarted",PLAYBACK_SUSPENDED:e+"playbackSuspended",BUFFERING:e+"buffering",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_ERROR:e+"playStartError",BUFFER_TWEAKS_CREATED:e+"bufferTweaksCreated",BUFFER_TWEAKS_ERROR:e+"bufferTweaksError"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="logic.";return{BASE:e,STATE_CHANGE:e+"stateChange",LOADING_TIMEOUT:e+"loadingTimeout",BUFFERING_TIMEOUT:e+"bufferingTimeout",STREAM_INFO:e+"streamInfo",SERVER_INFO:e+"serverInfo",STREAM_URL:e+"streamUrl",NO_KEEP_CONNECTION:e+"noKeepConnection",MIME_TYPE_UNSUPPORTED:e+"mimeTypeUnsupported",META_DATA_RECEIVED:e+"metaDataReceived",META_DATA_ERROR:e+"metaDataError",NO_SERVER_ERROR:e+"noServerError",MISSING_RTMP_ERROR:e+"missingRtmpError"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="network.";return{BASE:e,CONNECTING:e+"connecting",CONNECTED:e+"connected",DISCONNECTED:e+"disconnected",RESUMING:e+"resuming",RECONNECTION_IMMINENT:e+"reconnectionImminent",RECONNECTING:e+"reconnecting",RECONNECTION_CONFIG_INVALID:e+"reconnectionConfigInvalid",CONNECTION_ERROR:e+"connectionError",INITIALIZATION_ERROR:e+"initializationError",MAX_RETRY_REACHED:e+"maxRetryReached",ERROR:e+"error",DESTROYED:e+"destroyed",META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(10)],r=function(e){function t(t,n,i){e.log("["+n+"] "+i,t)}function n(e){return{debug:t.bind(this,a,e),info:t.bind(this,o,e),warn:t.bind(this,r,e),error:t.bind(this,i,e),detail:t.bind(this,s,e)}}var i=0,r=1,o=2,a=3,s=4;return{create:n}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(33),n(34),n(22),n(27),n(28),n(30)],r=function(e,t,n,i,r,o){function a(i,a){function p(){n.add({target:i,listeners:t.useHLS?O:R})}function m(){n.remove({target:i,listeners:t.useHLS?O:R})}function y(t){var n=[s,a,t].join(c);e&&"function"==typeof e.mark&&N.indexOf(n)===-1&&(e.mark(n),N.push(n))}function _(){y(u)}function T(){y(l)}function v(){y(h)}function g(){y(E)}function A(){y(d)}function S(){y(f)}var N=[],R=[{type:o.CONNECTING,listener:_},{type:o.CONNECTED,listener:T},{type:o.STREAM_FRAGMENT,listener:A},{type:r.LOADED_DATA,listener:S},{type:r.CAN_PLAY_THROUGH,listener:v},{type:r.PLAYING,listener:g}],O=[{type:r.LOAD_START,listener:_},{type:r.DURATION_CHANGE,listener:T},{type:r.LOADED_META_DATA,listener:A},{type:r.LOADED_DATA,listener:S},{type:r.CAN_PLAY_THROUGH,listener:v},{type:r.PLAYING,listener:g}];return p(),{destroy:m}}var s="nano",c=".",u="connecting",l="connected",d="firstFragmentReceived",f="firstFrameRendered",h="playable",E="playing";return{create:a}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e=Date.now?Date.now():+new Date,t=window.performance||{},n=[],i={},r=function(e,t){for(var i=0,r=n.length,o=[];i<r;i++)n[i][e]===t&&o.push(n[i]);return o},o=function(e,t){for(var i,r=n.length;r--;)i=n[r],i.entryType!==e||void 0!==t&&i.name!==t||n.splice(r,1)};return t.now||(t.now=t.webkitNow||t.mozNow||t.msNow||function(){return(Date.now?Date.now():+new Date)-e}),t.mark||(t.mark=t.webkitMark||function(e){var r={name:e,entryType:"mark",startTime:t.now(),duration:0};n.push(r),i[e]=r}),t.measure||(t.measure=t.webkitMeasure||function(e,t,r){t=i[t].startTime,r=i[r].startTime,n.push({name:e,entryType:"measure",startTime:t,duration:r-t})}),t.getEntriesByType||(t.getEntriesByType=t.webkitGetEntriesByType||function(e){return r("entryType",e)}),t.getEntriesByName||(t.getEntriesByName=t.webkitGetEntriesByName||function(e){return r("name",e)}),t.clearMarks||(t.clearMarks=t.webkitClearMarks||function(e){o("mark",e)}),t.clearMeasures||(t.clearMeasures=t.webkitClearMeasures||function(e){o("measure",e)}),void 0===window.performance&&(window.performance=t),window.performance}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(7)],r=function(e){var t="iOS"===e.os&&parseInt(e.osVersion.split(".")[0],10)>=10,n="Microsoft Internet Explorer"===e.browser||"Microsoft Edge"===e.browser,i="iOS"!==e.os&&!!window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'),r="Chrome"===e.browser&&parseInt(e.browserVersion,10)>57,o="iOS"===e.os&&parseInt(e.osVersion.split(".")[0],10)>=11,a="Firefox"===e.browser,s="Safari"===e.browser;return{useHLS:t,isIEorEdge:n,isChromeHigher57:r,hasMediaSource:i,isIOS11:o,isFirefox:a,isSafari:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(5),n(34),n(22),n(37),n(38),n(27),n(29),n(28),n(30),n(39),n(36),n(40),n(41),n(42),n(43),n(44),n(46),n(47),n(48),n(50),n(51)],r=function(e,t,n,i,r,o,a,s,c,u,l,d,f,h,E,p,m,y,_,T,v,g){"use strict";function A(A){function S(){b.debug("init"),O=r.create(A,C,D),I=r.create(C,A,w),i.add({target:C,listeners:L}),P.push(m.create(C))}function N(){for(O.destroy(),O=null,I.destroy(),I=null;P.length;)P.pop().destroy();i.remove({target:C,listeners:L})}function R(e){P.push(n.useHLS?_.create(C):y.create(C)),P.push(v.create(C)),P.push(T.create(C)),e.data.config.playback.metadata&&P.push(g.create(C))}var O,I,C=new t,b=e.create("LogicManager"),P=[],w=[{from:l.SEEK,to:a.SEEK},{from:l.RATE,to:a.SET_RATE},{from:d.CONNECT,to:a.CONNECT},{from:d.DISCONNECT,to:a.DISCONNECT},{from:d.VIDEO_SOURCE,to:a.VIDEO_SOURCE},{from:d.NETWORK_PLAY,to:a.NETWORK_PLAY},{from:d.NO_SERVER_ERROR,to:s.NO_SERVER_ERROR},{from:d.MISSING_RTMP_ERROR,to:s.MISSING_RTMP_ERROR},{from:d.NO_KEEP_CONNECTION,to:s.NO_KEEP_CONNECTION},{from:d.SERVER_INFO,to:s.SERVER_INFO},{from:d.URL,to:s.STREAM_URL},{from:h.LOADING_TIMEOUT,to:s.LOADING_TIMEOUT},{from:h.BUFFERING_TIMEOUT,to:s.BUFFERING_TIMEOUT},{from:E.CREATED,to:s.STREAM_INFO},{from:E.MIME_TYPE_UNSUPPORTED,to:s.MIME_TYPE_UNSUPPORTED},{from:p.RECEIVED,to:s.META_DATA_RECEIVED},{from:p.ERROR,to:s.META_DATA_ERROR}],D=[{from:o.PLAY,to:f.API_PLAY},{from:o.PAUSE,to:f.API_PAUSE},{from:c.BUFFER_TWEAKS_CREATED,to:f.BUFFER_TWEAKS_CREATED},{from:c.PLAY_STATS,to:f.PLAY_STATS},{from:c.PLAYBACK_STARTED,to:f.PLAYING},{from:c.BUFFERING,to:f.BUFFERING},{from:c.CAN_PLAY,to:f.CAN_PLAY},{from:u.CONNECTING,to:f.NETWORK_CONNECTING},{from:u.CONNECTED,to:f.NETWORK_CONNECTED},{from:u.DISCONNECTED,to:f.NETWORK_DISCONNECTED},{from:u.DESTROYED,to:f.NETWORK_DISCONNECTED},{from:u.RECONNECTING,to:f.NETWORK_RECONNECTING},{from:u.RECONNECTION_IMMINENT,to:f.NETWORK_RECONNECTION_IMMINENT},{from:u.INITIALIZATION_ERROR,to:f.NETWORK_INITIALIZATION_ERROR},{from:u.ERROR,to:f.NETWORK_ERROR},{from:u.RANDOM_ACCESS_POINT,to:f.RANDOM_ACCESS_POINT},{from:u.SERVER_INFO,to:f.SERVER_INFO},{from:u.STREAM_INFO,to:f.STREAM_INFO},{from:u.META_DATA,to:f.META_DATA},{from:s.STATE_CHANGE,to:f.APPLICATION_STATE_CHANGE},{from:s.STREAM_URL,to:f.STREAM_URL},{from:a.CONFIG,to:f.CONFIG}],L=[{type:f.CONFIG,listener:R}];return S(),{destroy:N}}return{create:A}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="connection.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",VIDEO_SOURCE:e+"videoSource",NETWORK_PLAY:e+"networkPlay",NO_SERVER_ERROR:e+"noServerError",MISSING_RTMP_ERROR:e+"missingRtmpError",SERVER_INFO:e+"serverInfo",NO_KEEP_CONNECTION:e+"noKeepConnection",URL:e+"url"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(22)],r=function(e){function t(t,n,i){function r(){s=[],i.forEach(function(e){s.push({type:e.from,listener:a})}),e.add({target:t,listeners:s})}function o(){e.remove({target:t,listeners:s}),s=null}function a(e){for(var t,r=0;r<i.length;++r)if(t=i[r],t.from===e.name){if(!t.guard||"function"==typeof t.guard&&t.guard.call()){var o={};for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);n.emit(t.to,o)}break}}var s;return r(),{destroy:o}}return{create:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="api.";return{PLAY:e+"play",PAUSE:e+"pause"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="liveBufferControl.";return{BASE:e,SEEK:e+"seek",RATE:e+"rate"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="logicManager.";return{BASE:e,API_PLAY:e+"apiPlay",API_PAUSE:e+"apiPause",NETWORK_CONNECTING:e+"networkConnecting",NETWORK_CONNECTED:e+"networkConnected",NETWORK_DISCONNECTED:e+"networkDisconnected",NETWORK_RECONNECTION_IMMINENT:e+"networkReconnectionImminent",NETWORK_RECONNECTING:e+"networkReconnecting",NETWORK_CONNECTION_ERROR:e+"networkConnectionError",NETWORK_INITIALIZATION_ERROR:e+"networkInitializationError",NETWORK_MAX_RETRY_REACHED:e+"networkMaxRetryReached",NETWORK_ERROR:e+"networkError",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",STREAM_URL:e+"streamUrl",CONFIG:e+"config",BUFFER_TWEAKS_CREATED:e+"tweaksCreated",PLAYING:e+"playing",BUFFERING:e+"buffering",PLAY_STATS:e+"playStats",APPLICATION_STATE_CHANGE:e+"applicationStateChange",CAN_PLAY:e+"canPlay",META_DATA:e+"metaData"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="timeout.";return{BASE:e,LOADING_TIMEOUT:e+"loadingTimeout",BUFFERING_TIMEOUT:e+"bufferingTimeout"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="streamInfo.";return{BASE:e,CREATED:e+"created",MIME_TYPE_UNSUPPORTED:e+"mimetypeUnsupported"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="metaData.";return{BASE:e,RECEIVED:e+"received",ERROR:e+"error"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(34),n(22),n(36),n(40),n(21),n(45)],r=function(e,t,n,i,r,o,a){function s(s){function c(){b.debug("init"),n.add({target:s,listeners:k})}function u(){n.remove({target:s,listeners:k})}function l(e){b.debug("network state change from "+O(I)+" to "+O(e.connectionState)),I=e.connectionState}function d(e){if(U){var t=e.data.onServerInfo.capabilities,n=e.data.onServerInfo.serverVersion,r=parseFloat(n);t.indexOf("onPlay")===-1&&t.indexOf("onPause")===-1&&(U=!1,s.emit(i.NO_KEEP_CONNECTION,{message:r<1.8?"The keepConnection feature is enabled by the players config, but is not supported by this server version ("+n+"). Use at least server version 1.8.0.0. The feature will be disabled.":"The keepConnection feature is enabled by the players config, but is not enabled by this server ("+n+"). The feature will be disabled."}),F||m())}s.emit(i.SERVER_INFO,e.data)}function f(e){var t=e.data.config;T(t.source.h5live),y(t.source.h5live.server),v(t.source.h5live.security),C=t.id,M=t.playback.metadata,U=t.playback.keepConnection,F=t.playback.autoplay,U&&p()}function h(){if(F=!0,I===o.OPEN?(b.debug("send network play"),s.emit(i.NETWORK_PLAY)):x||p(),t.useHLS){var e=_("hls")+g()+A()+R();s.emit(i.VIDEO_SOURCE,{src:e,type:a.HLS}),s.emit(i.URL,{url:e})}}function E(){F=!1,U||m(),t.useHLS&&s.emit(i.VIDEO_SOURCE,{src:"",type:a.HLS})}function p(){if(I!==o.OPEN&&(M||D||!t.useHLS)){F?N("paused"):S("paused"),M&&t.useHLS?S("metastreamonly"):N("metastreamonly"),!M&&D&&t.useHLS?S("checkandclose"):N("checkandclose");var e=g()+A()+R(),n=_("websocket"),r=n+"/"+e;b.debug("connect to: "+r,1),s.emit(i.CONNECT,{url:r}),t.useHLS||s.emit(i.URL,{url:r})}}function m(){b.debug("disconnecting"),s.emit(i.DISCONNECT)}function y(e){if("object"==typeof e){for(var t=["websocket","hls","progressive"],n=0;n<t.length;n++)e[t[n]]&&"string"==typeof e[t[n]]&&0!==e[t[n]].length&&(P||(P={}),P[t[n]]=e[t[n]]);b.debug("set connection server: "+JSON.stringify(P),3)}"undefined"==typeof P&&s.emit(i.NO_SERVER_ERROR)}function _(e){return"string"==typeof P[e]&&0!==P[e].length?(b.debug('get connection server from type "'+e+'": '+P[e],3),P[e]):(s.emit(i.NO_SERVER_ERROR),"")}function T(e){b.debug("set connection config",3);var t=e.rtmp;if("object"==typeof t&&t.url&&t.url.length&&t.streamname&&t.streamname.length){for(var n in t)if(t.hasOwnProperty(n)){var r=n.replace("name","");w.hasOwnProperty(r)&&(w[r]=t[n],b.debug("set connection config rtmp: "+r+":"+w[r]))}}else s.emit(i.MISSING_RTMP_ERROR);e.token&&w.hasOwnProperty("token")&&(w.token=e.token,b.debug("set connection config token: "+w.token))}function v(e){if(D=null,e){D={},b.debug("set security config",3);for(var t in e)e.hasOwnProperty(t)&&e[t].length&&(D[t]=e[t],b.debug("set security config "+t+": "+D[t]))}}function g(){var e="?";for(var t in w)w.hasOwnProperty(t)&&("cid"===t&&(w[t]=Math.round(1e6*Math.random()).toString()),"pid"!==t||w[t].length||(w[t]=C),w[t].length&&(e+=t+"="+encodeURIComponent(w[t])+"&"));return e.lastIndexOf("&")===e.length-1&&(e=e.substr(0,e.length-1)),e}function A(){var e="&";for(var t in D)D.hasOwnProperty(t)&&D[t].length&&(e+=t+"="+encodeURIComponent(D[t])+"&");return e.lastIndexOf("&")===e.length-1&&(e=e.substr(0,e.length-1)),e}function S(e){L.indexOf(e)===-1&&L.push(e)}function N(e){L=L.filter(function(t){return t!==e})}function R(){for(var e="",t="&flags=",n=0,i=L.length;n<i;n+=1)e+=L[n],n===i-1?e=t+encodeURIComponent(e):e+=",";return e}function O(e){for(var t in o)if(o.hasOwnProperty(t)&&o[t]===e)return t}var I,C,b=e.create("Connection"),P={websocket:"",hls:"",progressive:""},w={url:"",stream:"",cid:"",pid:"",token:""},D=null,L=[],x=!1,M=!1,U=!1,F=!0,k=[{type:r.NETWORK_CONNECTING,listener:l},{type:r.NETWORK_CONNECTED,listener:l},{type:r.NETWORK_DISCONNECTED,listener:l},{type:r.NETWORK_RECONNECTING,listener:l},{type:r.NETWORK_RECONNECTION_IMMINENT,listener:l},{type:r.NETWORK_INITIALIZATION_ERROR,listener:l},{type:r.NETWORK_ERROR,listener:l},{type:r.SERVER_INFO,listener:d},{type:r.CONFIG,listener:f},{type:r.API_PLAY,listener:h},{type:r.API_PAUSE,listener:E}];return c(),{destroy:u}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({MP4:"video/mp4",MP4_MS:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',HLS:"application/vnd.apple.mpegURL"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(34),n(22),n(39),n(40),n(20)],r=function(e,t,n,i,r,o){function a(a){function s(){T.debug("init"),n.add({target:a,listeners:R})}function c(){n.remove({target:a,listeners:R})}function u(e){v.buffer=e.data.tweaks.buffer}function l(e){for(A.push(e.data.onRandomAccessPoint.streamTime/1e3);A.length>10;)A.shift()}function d(e){switch(n.remove({target:a,listeners:O}),y=e.data.state){case o.PLAYING:n.add({target:a,listeners:O})}}function f(e){_=e.data.stats,N=e.data.playbackRate,g=e.data.currentTime,e.data.buffered&&e.data.buffered.length&&(S=_.buffer.end>S+.1?_.buffer.end:S,v.buffer.max<_.buffer.delay.current&&_.buffer.end>v.buffer.min?(T.debug("tweaks.buffer.max ("+v.buffer.max+") < stats.buffer.delay.current ("+_.buffer.delay.current+") && stats.buffer.end ("+_.buffer.end+") > tweaks.buffer.min ("+v.buffer.min+")"),E(v.buffer.target)):v.buffer.limit<_.buffer.delay.current?t.isIEorEdge?E(v.buffer.target):h(1.1):v.buffer.target>_.buffer.delay.current&&h(1))}function h(e){N!==e&&(T.debug("set rate to "+e),a.emit(i.RATE,{rate:e}))}function E(e){var n=S-e;t.isIEorEdge&&(n=m(g,n),n<0)||p(n)}function p(e){T.debug("seeking to "+e),a.emit(i.SEEK,{position:e})}function m(e,t){for(var n=0;n<A.length;++n)if(A[n]>e&&A[n]<=t)return A[n];return-1}var y,_,T=e.create("WSSLiveController"),v={},g=0,A=[],S=0,N=1,R=[{type:r.APPLICATION_STATE_CHANGE,listener:d},{type:r.BUFFER_TWEAKS_CREATED,listener:u},{type:r.RANDOM_ACCESS_POINT,listener:l}],O=[{type:r.PLAY_STATS,listener:f}];return s(),{destroy:c}}return{create:a}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(34),n(22),n(39),n(40),n(20)],r=function(e,t,n,i,r,o){function a(t){function a(){E.debug("init"),n.add({target:t,listeners:_})}function s(){n.remove({target:t,listeners:_})}function c(e){for(var t in e.data.tweaks.buffer)e.data.tweaks.buffer[t]!==m.buffer[t]&&(p=!1);p||(m.buffer=e.data.tweaks.buffer)}function u(e){switch(n.remove({target:t,listeners:T}),f=e.data.state){case o.PLAYING:n.add({target:t,listeners:T})}}function l(e){h=e.data.stats,y=e.data.playbackRate,e.data.buffered&&e.data.buffered.length&&(p?h.buffer.update.avg>0&&h.buffer.update.avg+m.buffer.limit-.7<h.buffer.delay.avg?d(1.1):h.buffer.update.avg>0&&h.buffer.update.avg+m.buffer.min<h.buffer.delay.avg<=h.buffer.update.avg+m.buffer.target-.7?d(1):h.buffer.update.avg>=0&&h.buffer.update.avg>=h.buffer.delay.avg&&d(.9):m.buffer.limit<h.buffer.delay.avg?d(1.1):m.buffer.start<h.buffer.delay.avg<=m.buffer.target?d(1):m.buffer.min>=h.buffer.delay.avg&&d(.9))}function d(e){y!==e&&(E.debug("set rate to: "+e),t.emit(i.RATE,{rate:e}))}var f,h,E=e.create("HLSLiveController"),p=!0,m={buffer:{max:8,min:.2,start:.5,target:1.2,limit:1.7}},y=1,_=[{type:r.APPLICATION_STATE_CHANGE,listener:u},{type:r.BUFFER_TWEAKS_CREATED,listener:c}],T=[{type:r.PLAY_STATS,listener:l}];return a(),{destroy:s}}return{create:a}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(34),n(22),n(40),n(42),n(20),n(49),n(45)],r=function(e,t,n,i,r,o,a,s){function c(c){function u(){_.debug("init"),n.add({target:c,listeners:T})}function l(){n.remove({target:c,listeners:T})}function d(e){p=e.data.state}function f(e){y=e.data.url}function h(e){if(p!==o.READY){m=e.data.onStreamInfo;var t=m&&m.mimeType?m.mimeType:s.MP4_MS;if(window.MediaSource.isTypeSupported(t)){var n={},i=[a.PREROLL_DURATION,a.MIME_TYPE];for(var u in a)if(a.hasOwnProperty(u)){var l=a[u];a.hasOwnProperty(u)&&m.hasOwnProperty(l)&&i.indexOf(l)===-1&&(n[l]=m[l])}m=n,m.url=y,c.emit(r.CREATED,{streamInfo:m})}else c.emit(r.MIME_TYPE_UNSUPPORTED)}}function E(e){t.useHLS&&p===o.LOADING&&(m={haveAudio:e.data.haveAudio,haveVideo:e.data.haveVideo,audioInfo:e.data.haveAudio?{bitsPerSample:null,channels:null,sampleRate:null}:null,videoInfo:e.data.haveVideo?{width:e.data.videoWidth,height:e.data.videoHeight,frameRate:null}:null},m.url=y,c.emit(r.CREATED,{streamInfo:m}))}var p,m,y,_=e.create("StreamInfo"),T=[{type:i.APPLICATION_STATE_CHANGE,listener:d},{type:i.STREAM_INFO,listener:h},{type:i.STREAM_URL,listener:f},{type:i.CAN_PLAY,listener:E}];return u(),{destroy:l}}return{create:c}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({HAVE_VIDEO:"haveVideo",HAVE_AUDIO:"haveAudio",VIDEO_INFO:"videoInfo",AUDIO_INFO:"audioInfo",PREROLL_DURATION:"prerollDuration",MIME_TYPE:"mimeType"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(34),n(22),n(39),n(40),n(41),n(20)],r=function(e,t,n,i,r,o,a){function s(t){function i(){m.debug("init"),n.add({target:t,listeners:y})}function s(){clearTimeout(E),clearTimeout(p),n.remove({target:t,listeners:y})}function l(e){switch(h=e.data.state){case a.READY:case a.PLAYING:case a.PAUSED:clearTimeout(E),clearTimeout(p)}h===a.BUFFERING?d():clearTimeout(p),h===a.LOADING&&f(e.data.connectDelay)}function d(){clearTimeout(p),p=setTimeout(function(){t.emit(o.BUFFERING_TIMEOUT)},u)}function f(e){clearTimeout(E),E=setTimeout(function(){t.emit(o.LOADING_TIMEOUT)},c+e)}var h,E,p,m=e.create("Timeout"),y=[{type:r.APPLICATION_STATE_CHANGE,listener:l}];return i(),{destroy:s}}var c=2e4,u=2e4;return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(34),n(22),n(12),n(20),n(40),n(43)],r=function(e,t,n,i,r,o,a){function s(s){function c(){A.debug("init"),n.add({target:s,listeners:S})}function u(){n.remove({target:s,listeners:S})}function l(){g=0,m=!0,y={handlerName:"",streamTime:0,message:[]},_=[],T=[],v=0}function d(e){switch(p=e.data.state){case r.LOADING:l(),n.add({target:s,listeners:N});break;case r.PAUSING:n.remove({target:s,listeners:N})}}function f(e){A.debug("onMetaData");var t=e.data[e.data.eventType];if(1===t.chunkIndex)"function"==typeof y.message.push&&0!==y.message.length&&s.emit(a.ERROR,{code:i.STREAM.METADATA_STILL_PROCESSING,message:"Received metadata with start index but currently process another. Discard old one."}),m=!0,y={handlerName:t.handlerName,streamTime:t.streamTime,message:[]};else{if(0===y.message.length||"function"!=typeof y.message.push)return void(m&&(s.emit(a.ERROR,{code:i.STREAM.METADATA_NO_START_INDEX,message:"Received metadata but no start index. Discard."}),m=!1,y.message=[]));if(!m)return}if(y.message.push(t.message),y.message.length!==t.chunkIndex)m&&(s.emit(a.ERROR,{code:i.STREAM.METADATA_WRONG_INDEX,message:"Received metadata with wrong index. Discard."}),m=!1,y.message=[]);else if(t.chunkCount-t.chunkIndex===0)try{var n=y.message.join(""),r=y.handlerName;A.debug("handlerName="+r+", metaData="+n),n=JSON.parse(n),y.message=n;var o={handlerName:y.handlerName,streamTime:y.streamTime,message:y.message};_.push(o)}catch(e){s.emit(a.ERROR,{code:i.STREAM.METADATA_INVALID_JSON,message:"Received metadata with invalid json string."})}}function h(e){for(g=e.data.currentTime;_.length;){var n=_.shift(),i=t.useHLS&&e.data.stats.buffer.delay.avg?e.data.stats.buffer.delay.avg:0;n.streamTime+v+i<=g?(n.streamTime+=v+i,s.emit(a.RECEIVED,n)):T.push(n)}for(;T.length;)_.push(T.shift())}function E(){v=p===r.PLAYING&&t.useHLS?g:0}var p,m,y,_,T,v,g,A=e.create("MetaData"),S=[{type:o.APPLICATION_STATE_CHANGE,listener:d}],N=[{type:o.META_DATA,listener:f},{type:o.PLAY_STATS,listener:h},{type:o.NETWORK_CONNECTED,listener:E}];return c(),{destroy:u}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(5),n(22),n(27),n(30),n(37),n(53),n(54),n(55),n(56),n(57)],r=function(e,t,n,i,r,o,a,s,c,u){"use strict";function l(t){function l(){f=r.create(t,E,y),h=r.create(E,t,m),p.push(u.create(E)),p.push(c.create(E))}function d(){for(f.destroy(),f=null,h.destroy(),h=null;p.length;)p.pop().destroy()}var f,h,E=new e,p=[],m=[{from:s.CONNECTING,to:i.CONNECTING},{from:s.CONNECTED,to:i.CONNECTED},{from:s.RESUMING,to:i.RESUMING},{from:s.DESTROYED,to:i.DESTROYED},{from:s.RECONNECTING,to:i.RECONNECTING},{from:s.RECONNECTION_IMMINENT,to:i.RECONNECTION_IMMINENT},{from:s.RECONNECTION_CONFIG_INVALID,to:i.RECONNECTION_CONFIG_INVALID},{from:s.DISCONNECTED,to:i.DISCONNECTED},{from:s.INITIALIZATION_ERROR,to:i.INITIALIZATION_ERROR},{from:s.ERROR,to:i.ERROR},{from:a.META_DATA,to:i.META_DATA},{from:a.RANDOM_ACCESS_POINT,to:i.RANDOM_ACCESS_POINT},{from:a.SERVER_INFO,to:i.SERVER_INFO},{from:a.STREAM_INFO,to:i.STREAM_INFO},{from:a.RAW_PACKET,to:i.RAW_PACKET},{from:a.STREAM_FRAGMENT,to:i.STREAM_FRAGMENT}],y=[{from:n.CONNECT,to:o.CONNECT},{from:n.DISCONNECT,to:o.DISCONNECT},{from:n.NETWORK_PLAY,to:o.PLAY},{from:n.PAUSE,to:o.PAUSE},{from:n.CONFIG,to:o.CONFIG}];return l(),{destroy:d}}return{create:l}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="networkmanager.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",PLAY:e+"play",PAUSE:e+"pause",CONFIG:e+"config"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="message.";return{BASE:e,META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="wss.";return{BASE:e,CONNECTING:e+"connecting",CONNECTED:e+"connected",DISCONNECTED:e+"disconnected",RESUMING:e+"resuming",MESSAGE:e+"message",RECONNECTION_IMMINENT:e+"reconnectionImminent",RECONNECTING:e+"reconnecting",RECONNECTION_CONFIG_INVALID:e+"reconnectionConfigInvalid",CONNECTION_ERROR:e+"connectionError",INITIALIZATION_ERROR:e+"initializationError",DESTROYED:e+"destroyed",ERROR:e+"error",STATE_CHANGE:e+"stateChange"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(22),n(54),n(55)],r=function(e,t,n){"use strict";function i(i){function r(){e.add({target:i,listeners:l})}function o(){e.remove({target:i,listeners:l})}function a(e){if(e){var n=e.data;if("string"==typeof n){var r=JSON.parse(n);if(r&&r.eventType){var o=r.eventType.substr(2,r.eventType.length-2),a=t.BASE+o[0].toLowerCase()+o.slice(1);a===t.STREAM_INFO&&s(),i.emit(a,r)}}else if(n instanceof ArrayBuffer&&n.byteLength>0){var l=new Uint8Array(n);if(i.emit(t.RAW_PACKET),n.byteLength>=8&&109===l[4]&&111===l[5]&&111===l[6]&&102===l[7]){for(var d=new Uint8Array(u),f=0,h=0;h<c.length;h++)d.set(c[h],f),f+=c[h].length;s(),i.emit(t.STREAM_FRAGMENT,d)}c.push(l),u+=n.byteLength}}}function s(){for(;c.length;)c.pop();u=0}var c=[],u=0,l=[{type:n.MESSAGE,listener:a}];return r(),{destroy:o}}return{create:i}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(34),n(18),n(22),n(21),n(53),n(55),n(58),n(59),n(60)],r=function(e,t,n,i,r,o,a,s,c,u){function l(e){function l(){i.add({target:e,listeners:U})}function f(){d.debug("destroy"),I(),i.remove({target:e,listeners:U})}function h(t){H=!1,clearTimeout(D),x=t.data,x.count=W.retryCount;try{R(x.url),e.emit(t.name?a.CONNECTING:a.RECONNECTING,w(x))}catch(t){e.emit(a.INITIALIZATION_ERROR,w(b(t)))}}function E(){try{x=u.create(x,!1),null===F?R(x.url):(d.debug("sending play to server"),C("onPlay"),e.emit(a.RESUMING,w()))}catch(t){e.emit(a.ERROR,w(b(t)))}}function p(){try{null!==F&&(d.debug("sending pause to server"),x=u.create(x,!0),C("onPause"))}catch(t){e.emit(a.ERROR,w(b(t)))}}function m(){try{null!==F&&B&&(d.debug("sending ping to server"),C("onPing"))}catch(t){e.emit(a.ERROR,w(b(t)))}}function y(t){if(t.data.config.playback.reconnect){var n=s.validate(t.data.config.playback.reconnect);if(n.success)for(var i in t.data.config.playback.reconnect)t.data.config.playback.reconnect.hasOwnProperty(i)&&(W[i]=t.data.config.playback.reconnect[i]);else e.emit(a.RECONNECTION_CONFIG_INVALID,w({reason:n.reason}))}}function _(){O()}function T(){setTimeout(function(){H||null===F||(clearTimeout(G),B&&(Y=setInterval(m,V)),e.emit(a.CONNECTED,w({count:W.retryCount})),W.retryCount=0)},200)}function v(e){clearTimeout(G),clearInterval(Y);var i=e;t.isIEorEdge&&1005===e.code&&(i=n.copy(e),i.code=parseInt(e.reason.split(" ")[1])),4200!==i.code&&N(i,a.DISCONNECTED,w({code:i.code}))}function g(t){e.emit(a.MESSAGE,w(t.data))}function A(e){clearTimeout(L),L=setTimeout(function(){H||null===F||(clearTimeout(G),N(e,a.CONNECTION_ERROR,w(e)))},200)}function S(){H||null===F||N(null,a.INITIALIZATION_ERROR,w({message:"Could not open connection. Timeout reached."}))}function N(t,n,i){if(!H)if(clearTimeout(D),D=0,(t&&t.data&&M.indexOf(t.data.code)!==-1||i&&i.data&&M.indexOf(i.data.code)!==-1)&&W.retryCount<W.maxRetries){if(H=!0,!W.retryCount){for(;W.delays.length;)W.delays.pop();W.delays=c.calculate(W.minDelay,W.maxDelay,W.delaySteps,W.maxRetries,W.randomFactor)}var r=W.delays[W.retryCount];W.retryCount++;var o=x;o.count=W.retryCount,D=setTimeout(h.bind(null,{data:o}),r);var s=t&&t.data&&t.data.code?t.data.code:t&&t.code?t.code:0;s&&(s=i&&i.data&&i.data.code?i.data.code:i&&i.code?i.code:0),e.emit(a.RECONNECTION_IMMINENT,{delay:r,count:W.retryCount,code:s})}else e.emit(n,i)}function R(e){I(),F=new WebSocket(e),F.binaryType="arraybuffer",F.onopen=T,F.onclose=v,F.onmessage=g,F.onerror=A,G=setTimeout(S,5e3)}function O(){I(),e.emit(a.DESTROYED,w())}function I(){clearTimeout(G),clearTimeout(D),clearTimeout(L),clearInterval(Y),null!==F&&(F.onopen=null,F.onclose=null,F.onmessage=null,F.onerror=null,F.close(),F=null)}function C(e){F.send('{"eventType":"'+e+'", "'+e+'":{}}')}function b(e){return{code:e.code,name:e.name,message:e.message}}function P(){return k=null!==F?F.readyState+2:r.UNINITIALIZED}function w(e){return{connectionState:P(),data:e||void 0}}var D,L,x,M=[1002,1003,1005,1006,1007,1008,1009,1011,1015,4500,4503],U=[{type:o.CONNECT,listener:h},{type:o.DISCONNECT,listener:_},{type:o.PLAY,listener:E},{type:o.PAUSE,listener:p},{type:o.CONFIG,listener:y}],F=null,k=r.UNINITIALIZED,G=0,Y=0,V=5e4,B=!1,H=!1,W={minDelay:2,maxDelay:10,delaySteps:10,maxRetries:10,delays:[],retryCount:0,randomFactor:1.5};return l(),{destroy:f}}var d=e.create("websocket");return{create:l}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e){for(var t=["minDelay","maxDelay","delaySteps","maxRetries"],n=0;n<t.length;++n){if(!e.hasOwnProperty(t[n]))return{success:!1,reason:"The reconnect config is invalid, it must contain 'minDelay', 'maxDelay', 'delaySteps', and 'maxRetries'. Reset to default."};if("number"!=typeof e[t[n]])return{success:!1,reason:"The reconnect config is invalid, the value '"+t[n]+"' have to be a number. Reset to default."}}return e[t[0]]>e[t[1]]?{success:!1,reason:"The reconnect config is invalid, the value '"+t[0]+"' have to be lower then '"+t[1]+"'. Reset to default."}:e[t[0]]<1?{success:!1,reason:"The reconnect config is invalid, the value '"+t[0]+"' have to be greater or equal then 1 sec. Reset to default."}:{success:!0}}return{validate:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e,t,n,i,r){var o=[],a=Math.sqrt(e),s=Math.sqrt(t);n>i&&(n=i);for(var c=(s-a)/(n-1),u=0;u<i;u+=1){var l=r*(Math.random()-.5),d=a+c*Math.min(n-1,u)+(!u&&a-Math.abs(l)<=.5?Math.abs(l)+r*Math.random():l),f=Math.round(d*d*1e3);o.push(f)}return o}return{calculate:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e,t){var n=e.url.split("&flags=");if(n.length>1&&(n[1]=decodeURIComponent(n[1])),t)n.length>1&&n[1].indexOf("paused")===-1?e.url=n[0]+"&flags="+encodeURIComponent("paused,"+n[1]):1===n.length&&(e.url+="&flags=paused");else if(n.length>1&&n[1].indexOf("paused")!==-1){var i=n[1].split(",");if(1===i.length)e.url=e.url.replace("&flags=paused","");else{e.url=n[0]+"&flags=";for(var r=0;r<i.length;r+=1)"paused"!==i[r]&&(e.url+=encodeURIComponent(i[r]),e.url+=encodeURIComponent(i.length>2&&r<i.length-1?",":""))}}return e}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(34),n(5),n(7),n(22),n(37),n(45),n(27),n(29),n(28),n(30),n(63),n(64),n(65),n(66),n(67),n(62),n(68),n(69),n(70),n(71),n(72),n(75),n(78),n(82),n(83),n(84),n(85),n(87),n(88),n(89),n(90)],r=function(e,t,n,i,r,o,a,s,c,u,l,d,f,h,E,p,m,y,_,T,v,g,A,S,N,R,O,I,C,b,P,w){"use strict";function D(i){function D(){r.add({target:F,listeners:Y}),M=o.create(i,F,B),U=o.create(F,i,V),G.push(v.create(F)),G.push(g.create(F)),G.push(A.create(F)),G.push(w.create(F)),t.hasMediaSource&&G.push(S.create(F))}function L(e){k.debug("creating media handlers"),G.push(I.create(F)),G.push(b.create(F)),e.data.type===a.MP4?(G.push(R.create(F)),G.push(C.create(F)),G.push(P.create(F))):G.push(O.create(F)),t.isChromeHigher57&&G.push(N.create(F)),r.remove({target:F,listeners:Y})}function x(){for(M.destroy(),M=null,U.destroy(),U=null;G.length;)G.pop().destroy()}var M,U,F=new n,k=e.create("MediaManager"),G=[],Y=[{type:h.VIDEO_SOURCE,listener:L}],V=[{from:E.LOAD_START,to:u.LOAD_START},{from:E.PROGRESS,to:u.PROGRESS},{from:E.SUSPEND,to:u.SUSPEND},{from:E.ABORT,to:u.ABORT},{from:E.EMPTIED,to:u.EMPTIED},{from:E.STALLED,to:u.STALLED},{from:E.PLAY,to:u.PLAY},{from:E.PAUSE,to:u.PAUSE},{from:E.LOADED_META_DATA,to:u.LOADED_META_DATA},{from:E.LOADED_DATA,
to:u.LOADED_DATA},{from:E.WAITING,to:u.WAITING},{from:E.ERROR,to:u.ERROR},{from:E.PLAYING,to:u.PLAYING},{from:E.CAN_PLAY,to:u.CAN_PLAY},{from:E.CAN_PLAY_THROUGH,to:u.CAN_PLAY_THROUGH},{from:E.SEEKING,to:u.SEEKING},{from:E.SEEKED,to:u.SEEKED},{from:E.TIME_UPDATE,to:u.TIME_UPDATE},{from:E.ENDED,to:u.ENDED},{from:E.RATE_CHANGE,to:u.RATE_CHANGE},{from:E.DURATION_CHANGE,to:u.DURATION_CHANGE},{from:E.VOLUME_CHANGE,to:u.VOLUME_CHANGE},{from:E.ELEMENT_CREATED,to:u.ELEMENT_CREATED},{from:E.PLAY_START_SUCCESS,to:u.PLAY_START_SUCCESS},{from:E.PLAY_START_ERROR,to:u.PLAY_START_ERROR},{from:f.ERROR,to:u.PLAYBACK_ERROR},{from:f.SUSPENDED,to:u.PLAYBACK_SUSPENDED},{from:y.QUALITY_STATS,to:u.QUALITY_STATS},{from:y.FRAME_DROP,to:u.FRAME_DROP},{from:_.PLAY_STATS,to:u.PLAY_STATS},{from:p.SOURCE_OPEN,to:u.SOURCE_OPEN},{from:p.SOURCE_ENDED,to:u.SOURCE_ENDED},{from:p.SOURCE_CLOSED,to:u.SOURCE_CLOSED},{from:d.PLAYBACK_STARTED,to:u.PLAYBACK_STARTED},{from:d.BUFFERING,to:u.BUFFERING},{from:T.BUFFER_TWEAKS_CREATED,to:u.BUFFER_TWEAKS_CREATED},{from:T.BUFFER_TWEAKS_ERROR,to:u.BUFFER_TWEAKS_ERROR}],B=[{from:s.CREATE_VIDEO,to:h.CREATE_VIDEO},{from:s.DESTROY_VIDEO,to:h.DESTROY_VIDEO},{from:s.VIDEO_SOURCE,to:h.VIDEO_SOURCE},{from:s.PLAY,to:h.PLAY},{from:s.PAUSE,to:h.PAUSE},{from:s.SEEK,to:h.SEEK},{from:s.MUTE,to:h.MUTE},{from:s.UNMUTE,to:h.UNMUTE},{from:s.SET_VOLUME,to:h.SET_VOLUME},{from:s.SET_RATE,to:h.SET_RATE},{from:s.CONFIG,to:m.CONFIG},{from:l.SERVER_INFO,to:m.SERVER_INFO},{from:l.STREAM_INFO,to:m.STREAM_INFO},{from:l.STREAM_FRAGMENT,to:m.STREAM_FRAGMENT},{from:l.RANDOM_ACCESS_POINT,to:m.RANDOM_ACCESS_POINT},{from:c.STATE_CHANGE,to:m.APPLICATION_STATE_CHANGE}];return D(),{destroy:x}}return{create:D}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaManager.";return{BASE:e,CONFIG:e+"config",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",APPLICATION_STATE_CHANGE:e+"applicationStateChange"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaControl.";return{BASE:e,PLAYBACK_STARTED:e+"playbackStarted",BUFFERING:e+"buffering"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaHandler.";return{BASE:e,ERROR:e+"error",SUSPENDED:e+"suspended"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaControl.";return{BASE:e,CREATE_VIDEO:e+"createVideo",DESTROY_VIDEO:e+"destroyVideo",VIDEO_SOURCE:e+"videoSource",PLAY:e+"play",PAUSE:e+"pause",SEEK:e+"seek",MUTE:e+"mute",UNMUTE:e+"unmute",SET_VOLUME:e+"volume",SET_RATE:e+"playbackRate"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaElementProxy.";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",QUALITY_UPDATE:e+"qualityupdate",ELEMENT_CREATED:e+"elementCreated",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_ERROR:e+"playStartError"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaSourceProxy.";return{BASE:e,SOURCE_OPEN:e+"sourceopen",SOURCE_ENDED:e+"sourceended",SOURCE_CLOSED:e+"sourceclosed",SOURCE_READY:e+"sourceready"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="qualityHandler.";return{BASE:e,QUALITY_STATS:e+"qualitystats",FRAME_DROP:e+"framedrop"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="statsCollector.";return{BASE:e,PLAY_STATS:e+"playStats"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="mediaControl.";return{BASE:e,BUFFER_TWEAKS_CREATED:e+"tweaksCreated",BUFFER_TWEAKS_ERROR:e+"tweaksError"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(34),n(45),n(22),n(63),n(70),n(65),n(66),n(67),n(62),n(69),n(20)],r=function(e,t,n,i,r,o,a,s,c,u,l,d){function f(f){function h(){i.add({target:f,listeners:k}),p()}function E(){i.remove({target:f,listeners:k}),m()}function p(){m(),i.add({target:f,listeners:G})}function m(){i.remove({target:f,listeners:G})}function y(){_(),L&&i.add({target:f,listeners:Y})}function _(){i.remove({target:f,listeners:Y})}function T(){y()}function v(e){!U&&P===d.PLAYING&&L.buffer.start<e.data.tweaks.buffer.start&&setTimeout(function(){M=!0,f.emit(r.BUFFERING),D.debug("new tweaks, pausing to raise buffer"),f.emit(a.PAUSE)},10),L.buffer=e.data.tweaks.buffer}function g(){clearTimeout(w)}function A(){U&&(P===d.LOADING?f.emit(a.PLAY):P===d.BUFFERING&&(M=!1,f.emit(r.PLAYBACK_STARTED)))}function S(){U&&P===d.PLAYING&&(M=!0,f.emit(r.BUFFERING))}function N(e){U=e.data.type===n.HLS}function R(e){switch(P=e.data.state){case d.LOADING:U&&y();break;case d.PAUSED:_();break;case d.PAUSING:_(),D.warn("entering paused state"),F=-1,x=!1,M=!0}}function O(){m(),f.emit(a.PLAY),p()}function I(){U||F!==-1||setTimeout(function(){D.debug("pausing to raise buffer"),f.emit(a.PAUSE)},10)}function C(e){if(e.data.buffered&&e.data.buffered.length){var n=e.data.stats,i=n.buffer.delay.current>L.buffer.start,o=n.buffer.delay.current>L.buffer.min,s=n.buffer.end-n.buffer.start,c=e.data.currentTime,u=e.data.buffered,l=b(u,c)!==-1;if(!U&&!l&&!x&&s>.45){var d=u.length,h=Math.min(u.start(d-1)+.3,u.end(d-1));return D.warn("seek to range: "+u.start(d-1)+" < "+h+" > "+u.end(d-1)),void f.emit(a.SEEK,{position:t.isIEorEdge?0:h})}if(!U&&!x&&t.isFirefox&&u.length>1&&b(u,c)!==u.length-1&&u.end(d-1)-u.start(d-1)>.3){var d=u.length,h=u.start(d-1);return D.warn("seek to startable range start: "+u.start(d-1)),void f.emit(a.SEEK,{position:h})}if(i&&F===-1&&l){if(F=c,!U&&t.isSafari&&F<.2)return F=.3,D.warn("initial safari stream startTime set to "+F+", seeking"),void f.emit(a.SEEK,{position:F});D.debug("stream startTime set to "+F)}M&&i&&(U||(D.debug("starting stream"),O()),M=!1,x&&f.emit(r.PLAYBACK_STARTED)),M||(!x&&F!==-1&&F<c-.1&&(x=!0,f.emit(r.PLAYBACK_STARTED)),c>L.buffer.start&&!o&&(M=!0,U||(D.debug("pausing to buffer"),f.emit(a.PAUSE)),f.emit(r.BUFFERING)))}}function b(e,n){for(var i=0;e&&i<e.length;++i)if(e.start(i)<=n&&e.end(i)>=n||t.isIEorEdge&&n<=.3&&e.start(i)<=5&&e.end(i)-e.start(i)>.2)return i;return-1}var P,w,D=e.create("BufferControl"),L={},x=!1,M=!0,U=!1,F=-1,k=[{type:u.APPLICATION_STATE_CHANGE,listener:R},{type:s.CAN_PLAY,listener:g},{type:s.CAN_PLAY_THROUGH,listener:A},{type:s.WAITING,listener:S},{type:a.VIDEO_SOURCE,listener:N},{type:c.SOURCE_READY,listener:T},{type:o.BUFFER_TWEAKS_CREATED,listener:v}],G=[{type:a.PLAY,listener:I}],Y=[{type:l.PLAY_STATS,listener:C}];return h(),{destroy:E}}return{create:f}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(18),n(34),n(73),n(22),n(63),n(70),n(68),n(62),n(69),n(74)],r=function(e,t,n,i,r,o,a,s,c,u,l){function d(d){function f(){C.debug("initialize"),E(),[k,n.useHLS?null:Y].forEach(function(e){!!e&&r.add({target:d,listeners:e})})}function h(){R=null,[k,G,Y].forEach(function(e){r.remove({target:d,listeners:e})})}function E(){R=i.create(10*x)}function p(e){r.add({target:d,listeners:e?Y:G}),r.remove({target:d,listeners:e?G:Y})}function m(e){if(e.data.onStreamInfo.videoInfo&&e.data.onStreamInfo.haveVideo&&e.data.onStreamInfo.videoInfo.frameRate<=30&&n.isIEorEdge&&!F){var i=1;P=t.copy(b),A(Math.sqrt(30)-Math.sqrt(e.data.onStreamInfo.videoInfo.frameRate),i),P.start+=(P.target-P.start)/2,P.min+=(P.start-P.min)/2,S()}}function y(e){var i;e.data.config.tweaks&&(e.data.config.tweaks.buffer&&(i=l.validateBuffer(e.data.config.tweaks.buffer),i.success?(P=t.copy(e.data.config.tweaks.buffer),w=t.copy(P),F=!0):d.emit(a.BUFFER_TWEAKS_ERROR,{reason:i.reason})),e.data.config.tweaks.bufferDynamic&&!n.useHLS&&(i=l.validateDynamic(e.data.config.tweaks.bufferDynamic),i.success?(D=e.data.config.tweaks.bufferDynamic.offsetThreshold,L=e.data.config.tweaks.bufferDynamic.offsetStep,x=e.data.config.tweaks.bufferDynamic.cooldownTime):d.emit(a.BUFFER_TWEAKS_ERROR,{reason:i.reason}))),S()}function _(e){var t=e.data.stats.buffer.delay.current;t&&R.add(t),!U&&n.isIEorEdge&&t>O&&(P.target=t,P.limit=P.target+I,S()),U=!0}function T(){p(!0);var e=((new Date).getTime()-M)/1e3;M!==-1&&e<D&&P.start<w.limit&&(C.warn("buffering "+e+" seconds after stream started, raising buffer values"),A(L),S()),E(),clearInterval(N),N=0}function v(){p(!1),M=(new Date).getTime(),U&&x&&(N=setInterval(function(){C.debug("stream running stable since "+x+" sec"),C.debug("buffer min: "+R.minimum+", max: "+R.maximum),P.start>w.start?(C.debug(-L+" sec cooldown"),A(-L),S()):(C.debug("no cooldown"),clearInterval(N),N=0)},1e3*x))}function g(e){n.isFirefox&&(C.debug("frame drop"),C.debug(""+JSON.stringify(e)),C.debug("current buffer: "+JSON.stringify(P)),C.debug("limit: "+w.limit+", start: "+P.start),P.start<w.limit?(C.debug("start lower then limit -> tweaking"),A(P.target-P.start),S()):C.debug("start higher then limit -> tweaking denied"))}function A(e,t){t=t||1,["start","target","limit"].forEach(function(n){P[n]*=t,P[n]+=e})}function S(){C.debug("new buffer: "+JSON.stringify(P)),d.emit(a.BUFFER_TWEAKS_CREATED,{tweaks:{buffer:t.copy(P)}})}var N,R,O=2,I=1.5,C=e.create("BufferTweaker"),b={max:8,min:.2,start:.5,target:1.2,limit:1.7},P=t.copy(b),w=t.copy(b),D=0,L=0,x=0,M=-1,U=!1,F=!1,k=[{type:c.STREAM_INFO,listener:m},{type:c.CONFIG,listener:y},{type:s.FRAME_DROP,listener:g}],G=[{type:u.PLAY_STATS,listener:_},{type:o.BUFFERING,listener:T}],Y=[{type:o.PLAYBACK_STARTED,listener:v}];return f(),{destroy:h}}return{create:d}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e){return e.reduce(function(e,t){return e+t},0)/e.length}function t(e){return Math.pow(e.reduce(function(e,t){return e?t?e*t:e:t},0),1/e.length)}function n(e){var t=e.reduce(function(e,t,n){return t?n-1?e+1/t:(e?1/e:0)+1/t:e},0);return t?e.length/t:0}function i(i){function r(e){for(a.push(e);a.length>i;)a.shift();return o(),{minimum:s.min,maximum:s.max,arithmetic:s.arithmetic,geometric:s.geometric,harmonic:s.harmonic}}function o(){var i=JSON.parse(JSON.stringify(a)).sort(function(e,t){return e-t},0);s.arithmetic=e(i),s.geometric=t(i),s.harmonic=n(i),s.minimum=i[0],s.maximum=i[i.length-1]}var a=[],s={};return s={add:r,minimum:0,maximum:0,arithmetic:0,geometric:0,harmonic:0,values:a}}return{create:i}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e){var t=["min","start","target","limit","max"],n=t.filter(function(t){return!e.hasOwnProperty(t)});if(n.length)return{success:!1,reason:"The buffer config is invalid, it must contain "+n.join(", ")+". Reset to default."};for(var i in t){if("number"!=typeof e[t[i]])return{success:!1,reason:"The buffer config is invalid, the value '"+t[i]+"' have to be a number. Reset to default."};if(i>0&&e[t[i-1]]>e[t[i]])return{success:!1,reason:"The buffer config is invalid, the value '"+t[i-1]+"' have to be lower then '"+t[i]+"'. Reset to default."}}return{success:!0}}function t(e){var t=["offsetThreshold","offsetStep","cooldownTime"],n=t.filter(function(t){return!e.hasOwnProperty(t)});return n.length?{success:!1,reason:"The dynamic buffer config is invalid, it must contain "+n.join(", ")+". Reset to default."}:(t.forEach(function(t){if("number"!=typeof e[t]||0===e[t])return{success:!1,reason:"The dynamic buffer config is invalid, the value '"+t+"' have to be a number. Reset to default."}}),{success:!0})}return{validateBuffer:e,validateDynamic:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(34),n(76),n(22),n(77),n(65),n(62),n(66)],r=function(e,t,n,i,r,o,a,s){function c(c){function d(){i.add({target:c,listeners:G});var e=[r.TIME_UPDATE];for(var t in r)r.hasOwnProperty(t)&&e.indexOf(r[t])===-1&&Y.push({type:r[t],listener:N})}function f(){i.remove({target:c,listeners:G}),p()}function h(e){e.data.config.playback&&(F=!!e.data.config.playback.muted)}function E(e){if(C=document.getElementById(e.data.elementId),U=!!C,M.debug("using "+(U?"external ":"generated ")+"video eleement"),b=e.data.container,C?(D=C.parentElement,w=C.style.cssText,C.style.cssText=""):(C=document.createElement("video"),C.id=e.data.elementId,C.autoplay=!1,C.controls=!1,C.setAttribute("playsinline",!0),C.style.backgroundColor="transparent"),C.muted=F,C.volume=k,P=document.createElement("source"),C.appendChild(P),t.isIOS11){M.debug("iOS11 detected, using iframe hack"),C.style.width="100vw",C.style.height="100vh";var n=document.createElement("iframe");n.frameBorder=0,n.scrolling="no",n.style.cssText="width: 100%;height: 100%;position: absolute;display: block;top: 0;left: 0;",n.addEventListener("load",function(e){e.target.contentDocument.body.style.height="100%",e.target.contentDocument.body.style.width="100%",e.target.contentDocument.body.style.overflow="hidden",e.target.contentDocument.body.style.position="absolute",e.target.contentDocument.body.style.margin="0",e.target.contentDocument.body.style.padding="0",e.target.contentDocument.body.firstChild||(e.target.contentDocument.body.appendChild(C),i.remove({target:C,listeners:Y}),i.add({target:C,listeners:Y}))}),n.addEventListener("beforeunload",function(e){e.target.contentDocument.body.firstChild&&e.target.contentDocument.body.removeChild(C)}),b.appendChild(n)}else M.debug("appending video to container"),b.appendChild(C),i.add({target:C,listeners:Y});c.emit(s.ELEMENT_CREATED),c.emit(s.VOLUME_CHANGE,{muted:C.muted,volume:C.volume})}function p(){if(C){for(i.remove({target:C,listeners:Y}),t.useHLS&&(P.src="",C.load());b.firstChild;)b.removeChild(b.firstChild);for(;C.firstChild;)C.removeChild(C.firstChild);U&&(M.debug("releasing external video"),C.style.cssText=w,w=null,D.appendChild(C)),clearInterval(L),clearInterval(x),C=null}}function m(e){C&&(P.src=e.data.src,C.type=e.data.type,C.load(),clearInterval(L),clearInterval(x),e.data.src&&e.data.src.length&&(L=setInterval(R,u),"function"==typeof C.getVideoPlaybackQuality&&(x=setInterval(O,l))))}function y(){M.debug("mute"),F=!0,C&&(C.muted=!0)}function _(){M.debug("unmute"),F=!1,C&&(C.muted=!1)}function T(){M.debug("onPlay"),C&&n.play(C).then(function(){M.debug("play promise resolved"),c.emit(s.PLAY_START_SUCCESS)},function(e){M.debug("play promise rejected"),c.emit(s.PLAY_START_ERROR,{error:e.error})})}function v(){if(M.debug("onPause"),C&&(C.pause(),A({data:{rate:1}}),t.isIOS11))for(var e=0;e<b.children.length;e+=1){var n=b.children[e];n&&n.tagName&&"IFRAME"===n.tagName&&n.contentWindow.location.reload(!0)}}function g(e){k=Math.min(1,Math.max(0,e.data.volume)),C&&C.volume!==k&&(M.debug("set volume: "+e.data.volume),C.volume=k)}function A(e){C&&C.playbackRate!==e.data.rate&&(M.debug("set rate to: "+e.data.rate),C.playbackRate=e.data.rate)}function S(e){C&&(M.debug("seek to: "+e.data.position),C.currentTime=e.data.position)}function N(e){var t=I();switch(e.type){case r.ERROR:t.code=C.error.code;break;case r.VOLUME_CHANGE:t.muted=C.muted,t.volume=C.volume;break;case r.CAN_PLAY:t.haveVideo="undefined"!=typeof C.videoTracks&&C.videoTracks.length>0,t.haveAudio="undefined"!=typeof C.audioTracks&&C.audioTracks.length>0,t.videoWidth=C.videoWidth,t.videoHeight=C.videoHeight}M.detail(e.type),c.emit("mediaElementProxy."+e.type,t)}function R(){c.emit(s.TIME_UPDATE,I())}function O(){var e=I();e.quality=C.getVideoPlaybackQuality(),c.emit(s.QUALITY_UPDATE,e)}function I(){return{currentTime:C.currentTime,buffered:C.buffered,played:C.played,playbackRate:C.playbackRate}}var C,b,P,w,D,L,x,M=e.create("MediaElementProxy"),U=!1,F=!1,k=1,G=[{type:a.CONFIG,listener:h},{type:o.CREATE_VIDEO,listener:E},{type:o.DESTROY_VIDEO,listener:p},{type:o.VIDEO_SOURCE,listener:m},{type:o.PLAY,listener:T},{type:o.PAUSE,listener:v},{type:o.SEEK,listener:S},{type:o.MUTE,listener:y},{type:o.UNMUTE,listener:_},{type:o.SET_VOLUME,listener:g},{type:o.SET_RATE,listener:A}],Y=[];return d(),{destroy:f}}var u=100,l=1e3;return{create:c}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e){return new Promise(function(i,r){var o=e.play();o instanceof Promise?o.then(function(){i({media:e})},function(i){t=i&&i.name?i.name:"Unknown",n=i&&i.message?i.message:"Message not available.",r({media:e,error:{name:t,message:n}})}):i({media:e})})}var t,n;return{play:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(22),n(45),n(79),n(65),n(66),n(67),n(80)],r=function(e,t,n,i,r,o,a,s){function c(c){function u(){y.debug("create"),m=new window.MediaSource,t.add({target:c,listeners:_}),t.add({target:m,listeners:T}),v.push(s.create(c,m))}function l(){if(m){for(;v.length;)v.pop().destroy();y.debug("destroy"),t.remove({target:m,listeners:T}),m=null}}function d(){c.emit(r.VIDEO_SOURCE,{src:window.URL.createObjectURL(m),type:n.MP4})}function f(){c.emit(a.SOURCE_OPEN,p())}function h(){c.emit(a.SOURCE_ENDED,p())}function E(){c.emit(a.SOURCE_CLOSED,p())}function p(){return{readyState:m.readyState}}var m,y=e.create("MediaSourceProxy"),_=[{type:o.ELEMENT_CREATED,listener:d}],T=[{type:i.SOURCE_OPEN,listener:f},{type:i.SOURCE_ENDED,listener:h},{type:i.SOURCE_CLOSED,listener:E}],v=[];return u(),{destroy:l}}return{create:c}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="";return{BASE:e,SOURCE_OPEN:e+"sourceopen",SOURCE_ENDED:e+"sourceended",SOURCE_CLOSED:e+"sourceclosed"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(34),n(22),n(81),n(79),n(65),n(66),n(62),n(67),n(20)],r=function(e,t,n,i,r,o,a,s,c){function u(r,u){function l(){t.add({target:r,listeners:G})}function d(){for(;x.length;)x.pop();t.remove({target:r,listeners:G}),t.remove({target:r,listeners:Y}),O&&t.remove({target:O,listeners:V}),O=null}function f(e){I=e.data.currentTime}function h(e){E(e.data)}function E(e){m({command:M,fragment:e})}function p(e,t){m({command:U,from:e,to:t})}function m(e){L?e.force?x.unshift(e):x.push(e):y(e)}function y(e){switch(e.command){case M:F&&(L=!0,O.appendBuffer(e.fragment),R()||D++);break;case U:O.buffered.length&&O.buffered.end(O.length-1)>0&&(L=!0,O.remove(e.from,e.to))}}function _(){L=!1,k&&(k=0,r.emit(s.SOURCE_READY)),x.length?y(x.shift()):N()&&R()&&p(O.buffered.start(0),I-P)}function T(t){C=t.data.onStreamInfo;var n=C&&C.mimeType?C.mimeType:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"';u&&"open"===u.readyState?O?(F=!0,e.isIEorEdge&&!isNaN(u.duration)&&u.duration>0?(L=!0,k=1,u.duration=0):r.emit(s.SOURCE_READY)):g(n):u.addEventListener(i.SOURCE_OPEN,v.bind(null,n))}function v(e){u.removeEventListener(i.SOURCE_OPEN,v),g(e)}function g(e){O=u.addSourceBuffer(e),t.add({target:r,listeners:Y}),t.add({target:O,listeners:V}),F=!0,r.emit(s.SOURCE_READY)}function A(e){e.data.state===c.PAUSED&&S()}function S(){for(F=!1;x.length;)x.pop();p(0,1/0),D=0}function N(){return O.buffered.length&&O.buffered.start(0)<I-b}function R(){return w<D}var O,I,C,b=30,P=20,w=300,D=0,L=!1,x=[],M="append",U="remove",F=!0,k=0,G=[{type:a.STREAM_INFO,listener:T}],Y=[{type:o.TIME_UPDATE,listener:f},{type:a.APPLICATION_STATE_CHANGE,listener:A},{type:a.STREAM_FRAGMENT,listener:h}],V=[{type:n.UPDATE_END,listener:_}];return l(),{destroy:d}}return{create:u}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="";return{BASE:e,ABORT:e+"abort",ERROR:e+"error",UPDATE:e+"update",UPDATE_START:e+"updatestart",UPDATE_END:e+"updateend"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(22),n(65),n(62)],r=function(e,t,n,i){function r(r){function o(){l.debug("initialize"),t.add({target:r,listeners:d})}function a(){c(),t.remove({target:r,listeners:d})}function s(e){c(),e.data.onStreamInfo.haveAudio||(window.AudioContext=window.AudioContext||window.webkitAudioContext||function(){return{close:function(){}}},u=new AudioContext)}function c(){u&&"function"==typeof u.close&&(u.close(),u=null)}var u,l=e.create("FakeAudioContext"),d=[{type:i.STREAM_INFO,listener:s},{type:n.PAUSE,listener:c}];return o(),{destroy:a}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(34),n(22),n(65),n(62),n(66),n(20)],r=function(e,t,n,i,r,o,a){function s(s){function c(){g.debug("initialize"),n.add({target:s,listeners:S})}function u(){n.remove({target:s,listeners:S}),n.remove({target:s,listeners:N})}function l(e){m=e.data.state,n.remove({target:s,listeners:N}),(t.isIEorEdge&&m===a.PLAYING||!t.isIEorEdge&&m!==a.PAUSED)&&n.add({target:s,listeners:N})}function d(e){var t=h(e.data.currentTime,e.data.buffered),n=E(e.data.currentTime,e.data.buffered);if(y===e.data.currentTime){if(A++,A<_)return;if(n>t&&p(e.data.buffered,n)>v&&f(e.data.currentTime,e.data.buffered)){var r=e.data.buffered.start(E(e.data.currentTime,e.data.buffered));g.debug("recover gap, seek to "+r,3),s.emit(i.SEEK,{position:r}),s.emit(i.PLAY)}}y=e.data.currentTime,A=0}function f(e,t){return e+T>=t.end(h(e,t))}function h(e,t){for(var n=0;n<t.length-1&&t.start(n+1)<=e;)n++;return n}function E(e,t){for(var n=0;n<t.length-1&&t.start(n)<=e;)n++;return n}function p(e,t){return t<e.length?e.end(t)-e.start(t):0}var m,y,_=10,T=.2,v=.5,g=e.create("GapHandler"),A=0,S=[{type:r.APPLICATION_STATE_CHANGE,listener:l}],N=[{type:o.TIME_UPDATE,listener:d}];return c(),{destroy:u}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(18),n(22),n(64),n(62),n(69),n(20)],r=function(e,t,n,i,r,o,a){function s(s){function c(){E.debug("initialize"),n.add({target:s,listeners:p})}function u(){n.remove({target:s,listeners:p})}function l(e){n.remove({target:s,listeners:m});var t=e.data.state;switch(t){case a.PAUSED:case a.PAUSING:E.debug("entering paused state"),f=null;break;case a.PLAYING:n.add({target:s,listeners:m})}}function d(e){if(f&&"undefined"!=typeof f.currentTime&&e.data.stats.currentTime<f.currentTime-h){var n={currentTime:{last:f.currentTime,current:e.data.stats.currentTime}};s.emit(i.ERROR,n)}f=t.copy(e.data.stats)}var f,h=2,E=e.create("HLSJumpHandler"),p=[{type:r.APPLICATION_STATE_CHANGE,listener:l}],m=[{type:o.PLAY_STATS,listener:d}];return c(),{destroy:u}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(7),n(31),n(34),n(22),n(64),n(65),n(62),n(66),n(86),n(20)],r=function(e,t,n,i,r,o,a,s,c,u){function l(l){function d(){y.debug("initialize"),i.add({target:l,listeners:v})}function f(){i.remove({target:l,listeners:v})}function h(e){T=e.name===c.HIDDEN,y.debug(T?"hidden":"visible")}function E(t){var i=t.data.buffered.length?t.data.buffered.end(0)-t.data.currentTime:"n.a.";(n.useHLS&&t.name===s.PAUSE||T&&e.mobile)&&m===u.PLAYING?l.emit(r.SUSPENDED):_||(_=setTimeout(function(){m===u.PLAYING&&(y.debug("nanoplayer: recover unexpected pause type "+t.name+", delay = "+i,3),l.emit(o.PLAY)),_=0},200))}function p(e){m=e.data.state}var m,y=t.create("PauseHandler"),_=0,T=!1,v=[{type:s.PAUSE,listener:E},{type:s.WAITING,listener:E},{type:s.ENDED,listener:E},{type:a.APPLICATION_STATE_CHANGE,listener:p},{type:c.HIDDEN,listener:h},{type:c.VISIBLE,listener:h}];return d(),{destroy:f}}return{create:l}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){var e="visibility.";return{BASE:e,HIDDEN:e+"hidden",VISIBLE:e+"visible"}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(22),n(20),n(65),n(62),n(66),n(68)],r=function(e,t,n,i,r,o,a){function s(i){function s(){t.add({target:i,listeners:D})}function c(){t.remove({target:i,listeners:D}),t.remove({target:i,listeners:L})}function u(){for(m={droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0};I.length;)I.pop();w=!0}function l(e){y=e.data.state,y===n.PAUSED?h():!P&&C&&y===n.PLAYING&&f()}function d(e){C=e.data.onStreamInfo.haveVideo&&(b=e.data.onStreamInfo.videoInfo.frameRate)}function f(){h(),t.add({target:i,listeners:L}),P=setInterval(p,T)}function h(){clearInterval(P),t.remove({target:i,listeners:L}),P=0,u()}function E(e){for(var t in e.data.quality)if(m.hasOwnProperty(t)){if("droppedVideoFrames"===t){for(m.droppedVideoFramesCurrent=e.data.quality.droppedVideoFrames-m.droppedVideoFrames;I.length>R-1;)I.shift();I.push({count:m.droppedVideoFramesCurrent,time:e.data.currentTime})}"corruptedVideoFrames"===t&&(m.corruptedVideoFramesCurrent=e.data.quality.corruptedVideoFrames-m.corruptedVideoFrames),m[t]=e.data.quality[t]}i.emit(a.QUALITY_STATS,m)}function p(){if(y===n.PLAYING&&w){var e,t;I.length>A-1&&(t=I.filter(function(e,t){return I.length-t<=A&&e.count>=b*g}),t.length>S&&(I.splice(0,I.length-A),e={type:"high",framerate:b,samples:{all:I,matched:t,limit:Math.ceil(b*g)}})),!e&&I.length>R-1&&(t=I.filter(function(e){return e.count>=b*N}),t.length>O&&(e={type:"medium",framerate:b,samples:{all:I,matched:t,limit:Math.ceil(b*N)}})),e&&w&&(w=!1,_.debug("frame drop detected with type '"+e.type+"'",3),i.emit(a.FRAME_DROP,e),setTimeout(function(){w=!0},v))}}var m,y,_=e.create("QualityHandler"),T=1e3,v=1e4,g=.2,A=5,S=1,N=.1,R=10,O=3,I=[],C=!1,b=0,P=0,w=!0,D=[{type:r.APPLICATION_STATE_CHANGE,listener:l},{type:r.STREAM_INFO,listener:d}],L=[{type:o.QUALITY_UPDATE,listener:E}];return s(),{destroy:c}}return{create:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(33),n(22),n(34),n(73),n(20),n(62),n(65),n(66),n(69)],r=function(e,t,n,i,r,o,a,s,c){function u(a){function u(){y(),t.add({target:a,listeners:C}),t.add({target:a,listeners:b})}function l(){t.remove({target:a,listeners:b}),t.remove({target:a,listeners:C})}function d(e){switch(T=e.data.state){case r.PAUSED:t.remove({target:a,listeners:P});break;case r.PLAYING:break;case r.LOADING:y(),n.useHLS&&t.add({target:a,listeners:P})}}function f(e){R+=1,O+=e.data.byteLength}function h(e){!n.useHLS&&t.add({target:a,listeners:P}),v=e.data.onStreamInfo.haveVideo}function E(t){var i=t.data.buffered.length-1,o=t.data.played.length-1;if(_.currentTime=T===r.LOADING?0:t.data.currentTime,o>=0&&(_.playout.start=t.data.played.start(o),_.playout.end=t.data.played.end(o)),i>=0&&(!n.useHLS||n.useHLS&&(_.buffer.end!==t.data.buffered.end(i)||t.data.buffered.end(i)<_.currentTime))&&(_.buffer.update.current=t.data.buffered.end(i)-_.buffer.end,_.buffer.delay.before=_.buffer.end-_.currentTime,_.buffer.start=t.data.buffered.start(i),_.buffer.end=t.data.buffered.end(i),_.buffer.delay.current=_.buffer.end-_.currentTime,g.add(_.buffer.delay.current),m(g,_.buffer.delay),A.add(_.buffer.update.current),m(A,_.buffer.update)),e&&!n.useHLS){var a=Math.floor(e.now()/1e3);I!==a&&(I=a,_.bitrate.current=8*O,S.add(_.bitrate.current),m(S,_.bitrate),v&&(_.framerate.current=R,N.add(_.framerate.current),m(N,_.framerate)),R=0,O=0)}p(t)}function p(e){a.emit(c.PLAY_STATS,{stats:_,buffered:e?e.data.buffered:null,played:e?e.data.played:null,currentTime:e?e.data.currentTime:0,playbackRate:e?e.data.playbackRate:0})}function m(e,t){t.avg=e.arithmetic,t.min=e.minimum,t.max=e.maximum}function y(){_={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{before:0,current:0,avg:0,min:0,max:0},update:{current:0,avg:0,min:0,max:0}},quality:{droppedVideoFrames:0,droppedVideoFramesCurrent:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},bitrate:{current:0,avg:0,min:0,max:0},framerate:{current:0,avg:0,min:0,max:0}},g=i.create(10),A=i.create(10),S=i.create(10),N=i.create(10),R=0,O=0,p(null)}var _,T,v,g,A,S,N,R,O,I=0,C=[{type:o.APPLICATION_STATE_CHANGE,listener:d}],b=[{type:o.STREAM_FRAGMENT,listener:f},{type:o.STREAM_INFO,listener:h}],P=[{type:s.TIME_UPDATE,listener:E}];return u(),{destroy:l}}return{create:u}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(62)],r=function(e){function t(t){function n(){o()&&t.addListener(e.STREAM_FRAGMENT,r)}function i(){t.removeListener(e.STREAM_FRAGMENT,r)}function r(e){window.fragments||(window.fragments=[]),window.fragments.push(e.data)}function o(){return!!a("nanoDump")}function a(e){return document.cookie.indexOf(e+"=")!==-1?document.cookie.split(e+"=")[1].split(";")[0]:null}return n(),{destroy:i}}return{create:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(31),n(86)],r=function(e,t){function n(n){function i(){c.debug("initialize"),"undefined"!=typeof document.hidden?(a="hidden",s="visibilitychange"):"undefined"!=typeof document.msHidden?(a="msHidden",s="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(a="webkitHidden",s="webkitvisibilitychange"),document.addEventListener(s,o)}function r(){document.removeEventListener(s,o)}function o(){u=document[a],c.debug(u?"hidden":"visible"),n.emit(u?t.HIDDEN:t.VISIBLE)}var a,s,c=e.create("VisibilityProxy"),u=!1;return i(),{destroy:r}}return{create:n}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(10),n(7),n(11),n(12),n(13),n(14),n(15),n(38),n(27)],r=function(e,t,n,i,r,o,a,s,c){"use strict";function u(e){if(!("string"==typeof e||e instanceof String))throw new Error('The param "playerDivId" must be of type "String"');this._setBaseValues(e)}var l=e.log;u.isSupported=function(){return"iOS"===t.os&&parseInt(t.osVersion.split(".")[0],10)>=10},u.techName=r.H5LIVE_HLS;var d=u.prototype=Object.create(a.prototype);return d.setup=function(e){return new Promise(function(t,i){try{if("undefined"!=typeof e){var r=this._baseSetup(u.techName,e);r?i(r):(setTimeout(function(){this._setState(this.STATE.READY),this._emit(n.READY,{config:this.config}),this.config.playback.autoplay&&this.play()}.bind(this),20),t(this.config))}else i(Error("No config passed"))}catch(e){i(e)}}.bind(this))},d.destroy=function(){this._destroy()},d.play=function(){var e=arguments.length?arguments[0]:0;l("nanoplayer ("+this._playerDivId+"): play in state "+this.state,1),this.state<this.STATE.READY?this._emitError(i.PLAYER.NOT_CONFIGURED,"Could not play because player has not been configured."):this.state===this.STATE.READY||this.state===this.STATE.PAUSED?(this._playing=!0,e?setTimeout(function(){this.state===this.STATE.LOADING&&(this._componentEmitter.emit(s.PLAY),this._componentEmitter.emit(c.PLAY))}.bind(this),e):(this._componentEmitter.emit(s.PLAY),this._componentEmitter.emit(c.PLAY)),this._preparePlay(e)):this.state===this.STATE.PAUSING&&(l("nanoplayer ("+this._playerDivId+"play in PAUSING state, setting flag to resume"),this._resumeOnPause=!0)},d.pause=function(){var e=arguments.length?arguments[0]:0;l("nanoplayer ("+this._playerDivId+"): pause in state "+this.state,2),this.state<this.STATE.READY?this._emitError(i.PLAYER.NOT_PLAYING,"Could not pause because player was not in playing state before."):this.state!==this.STATE.PAUSED&&this.state!==this.STATE.PAUSING&&(this._pauseReason=this._getPauseReason(e),this._setState(this.STATE.PAUSING),this._playing=!1,this._resumeOnPause=!1,this._componentEmitter.emit(s.PAUSE),this._componentEmitter.emit(c.PAUSE),this._triggerPause())},u}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(4),n(13),n(16),n(10),n(17),n(7)],r=function(e,t,n,i,r,o){"use strict";function a(e){
this.version=n.CORE,this.type="native",this.config={playback:{autoplay:!0,muted:!1},source:{hls:void 0}},this._playerDivId=e}a.isSupported=function(){return"iOS"===o.os||"Safari"===o.browser},a.techName=t.NATIVE;var s=a.prototype=Object.create(e.prototype);return s.setup=function(e){var t=this;return new Promise(function(n,i){try{"undefined"!=typeof e?(r.merge(e,t.config),r.clean(t.config),window.location=t.config.source.hls,n(t.config)):i(Error("No config passed"))}catch(e){i(e)}})},s.play=function(){},s.pause=function(){},s.mute=function(){},s.unmute=function(){},s.setVolume=function(){},a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(4),n(13),n(25),n(16),n(94),n(5),n(10),n(17),n(19),n(11),n(95),n(20),n(14),n(49)],r=function(e,t,n,i,r,o,a,s,c,u,l,d,f,h){function E(e){this.version=i.CORE,this.type="flash",this.config=c.create(),this._volume=1,this._muted=!1,this._mediaElement=null,this._mediaSource=null,this._playing=!1,this._playerDivId=e,this._playerDiv=document.getElementById(this._playerDivId),this._mediaElementId="flash-"+e,this.state=this.STATE.IDLE,this._triggered=0,this._stats={currentTime:0,playout:{start:0,end:0},buffer:{start:0,end:0,delay:{current:0,avg:0,min:0,max:0}}},this._intervalEmitStats=0,this._streamInfo=null}var p=a.log;E.isSupported=function(){return 0!==r.ua.pv[0]},E.techName=t.FLASH;var m=E.prototype=Object.create(e.prototype);return m.setup=function(e){var t=this;return new Promise(function(n,i){try{r.ua.pv===[0,0,0]?i(Error("No flash available")):"undefined"!=typeof e?t._baseSetup(e).then(n,i):i(Error("No config passed"))}catch(e){i(e)}})},m.play=function(){this._setMediaElement(),this._mediaElement.Start()},m.pause=function(){this._triggered=arguments.length,clearTimeout(this._bufferTimeout),this._setMediaElement(),this._mediaElement.Stop()},m.mute=function(){this._setMediaElement(),this._muted=!0,this._mediaElement.SetVolume(0),this._emit(u.MUTE)},m.unmute=function(){this._setMediaElement(),this._muted=!1,this._mediaElement.SetVolume(this._volume),this._emit(u.UNMUTE)},m.setVolume=function(e){e<0&&(e=0),e>1&&(e=1),this._setMediaElement(),this._volume=e,this._muted||this._mediaElement.SetVolume(this._volume),this._emit(u.VOLUME_CHANGE,{volume:e})},m.destroy=function(){this.removeAllListeners(),this._mediaElement&&(this.pause(),document.getElementById(this._playerDivId).removeChild(this._mediaElement),this._mediaElement=null),clearTimeout(this._bufferTimeout)},m._baseSetup=function(e){s.merge(e,this.config),s.clean(this.config);var t=this.config.source.h5live.rtmp;return t&&t.url&&t.streamname?(this._emitter=new o,this._setListeners(this.config.events,this),this._metaDataEnabled=this.config.playback.metadata,this._setupVideoElement(),this._setupFinish()):this._setupError(n.CONFIG_RTMP)},m._setupError=function(e){return new Promise(function(t,n){n(e)})},m._setupVideoElement=function(){var e="nano.player.swf";"undefined"!=typeof this.config.playback.flashplayer&&(e=this.config.playback.flashplayer);var t=document.createElement("div");t.setAttribute("id","flashReplace"),this._playerDiv.appendChild(t);var n="9.0.0",i={},o={};o.quality="high",o.bgcolor="#000000",o.allowscriptaccess="always",o.allowfullscreen="true",o.allowfullscreeninteractive="true",o.wmode="transparent";var a={};a.id=this._mediaElementId,a.name=this._mediaElementId,a.align="middle",a.wmode="transparent",r.embedSWF(e,"flashReplace","100%","100%",n,null,i,o,a)},m._setupFinish=function(){var e=this;return new Promise(function(t,n){function i(){if(o++,r&&(e._mediaElement=document.getElementById(e._mediaElementId),e._mediaElement&&e._mediaElement.Start)){clearInterval(r);try{window._flashPlayers[e._mediaElementId]=e,e._setName(),e._mediaElement.TraceExternalFunctions(),e._setNetStream(!1),"string"==typeof e.config.source.h5live.rtmp&&(e.config.source.h5live.rtmp=e._parseUrl(e.config.source.h5live.rtmp)),e._setConnectionConfig(e.config.source.h5live.rtmp),e._setPlayerConfig(e._playerDiv.offsetWidth,e._playerDiv.offsetHeight),e.config.playback.muted&&e.mute(),e.config.url=e.config.source.h5live.rtmp.url+"/"+e.config.source.h5live.rtmp.streamname,e.config.type=e.type,e._setState(e.STATE.READY),e._emit(u.READY,{config:e.config}),e.config.playback.autoplay&&e.play(),t(e.config)}catch(e){n(e)}}o>100&&(clearInterval(r),n(Error('Could not find and embed the player.swf. Please check the path to the player in the config param "playback.flashplayer" or copy to base directory.')))}var r=0,o=0;r=setInterval(i,100)})},m._setListeners=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&"function"==typeof e[n]){var i=n.replace("on",""),r=e[n];t.on(i,r)}},m._setState=function(e){this.state=e,p("nanoplayer ("+this._playerDivId+'): set state "'+this._getState()+'"',3),this._emit(u.STATE_CHANGE)},m._getState=function(){for(var e in this.STATE)if(this.STATE[e]===this.state)return e},m._emit=function(e,t){var n={};return n.name=e||"unknown",n.state=this.state,n.data=t||{},n.player=this._playerDivId,n.data.currentTarget||(n.data.currentTarget=this._mediaElement),"Error"===e&&n.data.code&&n.data.message?(p("nanoplayer ("+this._playerDivId+"): error "+n.data.code+" "+n.data.message,1),this._emitError(n.data.code,n.data.message)):void this.emit(n.name,n)},m._emitError=function(e,t){this._emit(u.ERROR,{code:e,message:t})},m._setConnectionConfig=function(e){this._setMediaElement(),"object"==typeof e&&e.url&&e.url.length&&e.streamname&&e.streamname.length?(this._mediaElement.SetServerUrl(e.url),this._mediaElement.SetStreamName(e.streamname)):this._emit("Error",{code:1001,message:"No rtmp url set."})},m._setPlayerConfig=function(e,t){this._setMediaElement(),this._mediaElement.SetVideoDisplayResolution(e+","+t),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(e+","+t)},m._setNetStream=function(e){this._setMediaElement(),this._mediaElement.UseNetstream(e?1:0)},m._setMediaElement=function(){var e=document.getElementById(this._mediaElementId);this._mediaElement=e},m._getPauseReason=function(e){var t="";if(e)switch(this.state){case this.STATE.READY:t=f.SERVER_NOT_FOUND;break;case this.STATE.LOADING:t=f.STREAM_NOT_FOUND;break;case this.STATE.BUFFERING:t=f.BUFFER;break;case this.STATE.UNKNOWN:t=f.UNKNOWN;break;case this.STATE.PLAYING:t=f.NORMAL;break;default:t=f.NORMAL}else t=f.NORMAL;return t},m._startIntervals=function(){var e=this;this._stopIntervals(),this._onStats(!0),this._intervalEmitStats=setInterval(e._onStats.bind(e),100)},m._stopIntervals=function(){var e=this;e._intervalEmitStats&&(clearInterval(e._intervalEmitStats),e._intervalEmitStats=0)},m._onStreamInfo=function(e){p("nanoplayer ("+this._playerDivId+"): onStreamInfo",2),this._streamInfo=e.onStreamInfo,this._emit(u.STREAM_INFO,{streamInfo:this._parseStreamInfo()})},m._parseStreamInfo=function(){var e={},t=[h.PREROLL_DURATION,h.MIME_TYPE];for(var n in h){var i=h[n];h.hasOwnProperty(n)&&this._streamInfo.hasOwnProperty(i)&&t.indexOf(i)===-1&&(e[i]=this._streamInfo[i])}return e},m._onStats=function(e){var t=e?0:this._stats.currentTime+.1;this._stats.currentTime=t;var n="stats error";try{n=JSON.stringify(this._stats)}catch(e){}p("nanoplayer ("+this._playerDivId+"): stats - "+n,4),this._emit(u.STATS,{stats:this._stats})},m._onLoading=function(){var e=this;this._playing=!0,this._setState(this.STATE.LOADING),this._emit(u.LOADING),this._loadingTimout=setTimeout(function(){clearTimeout(e._loadingTimout),e._loadingTimout=0,e.state!==e.STATE.PLAYING&&e.pause()},5e4)},m._onPlaying=function(){var e=this;this._setState(this.STATE.PLAYING),this._startPlayingTimeout&&clearTimeout(this._startPlayingTimeout),this._startPlayingTimeout=setTimeout(function(){clearTimeout(e._startPlayingTimeout),e._startPlayingTimeout=0,e.state===e.STATE.PLAYING&&(e._playing=!0,e.setVolume(e._volume),!e._intervalEmitStats&&e._emit(u.PLAY),!e._intervalEmitStats&&e._startIntervals())},1e3)},m._onStartBuffering=function(){var e=this;this.state!==this.STATE.LOADING&&(this._setState(e.STATE.BUFFERING),this._startBufferTimeout&&clearTimeout(this._startBufferTimeout),this._startBufferTimeout=setTimeout(function(){clearTimeout(e._startBufferTimeout),e._startBufferTimeout=0,e.state===e.STATE.BUFFERING&&(e._playing=!1,e._emit(u.START_BUFFERING),e._bufferTimeout=setTimeout(function(){clearTimeout(e._bufferTimeout),e.state!==e.STATE.PLAYING&&e.pause()},2e4))},2e3))},m._onStopBuffering=function(){this._playing=!0,this._setState(this.STATE.PLAYING),this._emit(u.STOP_BUFFERING)},m._onPause=function(){this._playing=!1;var e=this._getPauseReason(this._triggered);p("nanoplayer ("+this._playerDivId+'): trigger pause with reason "'+e+'", state "'+this._getState()+'"',3),this._setState(this.STATE.PAUSED),this._stopIntervals(),this._emit(u.PAUSE,{reason:e})},m._emitMetaData=function(e,t){if(this._metaDataEnabled){p("nanoplayer ("+this._playerDivId+"): onMetaData",2);try{var n=JSON.stringify(t);p("nanoplayer ("+this._playerDivId+"): handlerName="+e+", metaData="+n,2)}catch(e){}var i={handlerName:e,streamTime:0,message:t};this._emit(u.METADATA,i)}},m._onMetaData=function(e){e.width&&e.height&&this._onStreamInfo({onStreamInfo:{videoInfo:{width:e.width,height:e.height}}}),this._emitMetaData("MetaData",e)},m._onCuePoint=function(e){this._emitMetaData("CuePoint",e)},m._onVolumeChange=function(){},m._onResize=function(){if(this._streamInfo&&this._streamInfo.haveVideo){this._setMediaElement();var e=this,t=this._streamInfo.videoInfo.width,n=this._streamInfo.videoInfo.height,i=this._mediaElement.GetCurrentSizeOfContainer(),r=i[0]/i[1],o=t/n;r<o?(t=i[0],n=Math.round(t/o)):(n=i[1],t=Math.round(n*o)),this._mediaElement.SetResize("true"),this._mediaElement.SetVideoDisplayResolution(t+","+n),this._mediaElement.SetResize("false"),this._mediaElement.SetOnlyThisResolution(t+","+n),this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(function(){e._resizeTimeout=0,e._mediaElement.SetResize("true"),e._mediaElement.SetVideoDisplayResolution(t+","+n),e._mediaElement.SetResize("false"),e._mediaElement.SetOnlyThisResolution(t+","+n)},300)}},m._onDebug=function(e){var t="string"==typeof e?e:e.message?e.message:e.data.message?e.data.message:"unknown";p("nanoplayer ("+this._playerDivId+"): "+t,2)},m._onFlashReady=function(){this._onDebug("flash ready")},m._onFlashState=function(e,t){if("undefined"!=typeof e){var n="";if("string"==typeof e||e instanceof String)n=e,this._onDebug("onFlashCallState: "+n+" from "+t);else{this._onDebug("onFlashCallState: "+t);for(var i in e)e.hasOwnProperty(i)&&(this._onDebug("onFlashCallState: "+i+" = "+e[i]),"state"!==i&&"code"!==i||(n=e[i]))}n===this.FLASH_STATE.VIDEO_DISPLAY.LOADING||n===this.FLASH_STATE.NET_STREAM.PLAY.RESET||n===this.FLASH_STATE.NET_STREAM.PLAY.UNPUBLISH_NOTIFY||n===this.FLASH_STATE.NET_STREAM.PLAY.PUBLISH_NOTIFY?this._onLoading():n===this.FLASH_STATE.VIDEO_DISPLAY.REWINDING||n===this.FLASH_STATE.VIDEO_DISPLAY.PLAYING||n===this.FLASH_STATE.NET_STREAM.PLAY.START?this._playing?this._onPlaying():this._onStopBuffering():n===this.FLASH_STATE.VIDEO_DISPLAY.BUFFERING?this._onStartBuffering():n!==this.FLASH_STATE.VIDEO_DISPLAY.CONNECTION_ERROR&&n!==this.FLASH_STATE.VIDEO_DISPLAY.STOPPED&&n!==this.FLASH_STATE.VIDEO_DISPLAY.DISCONNECTED&&n!==this.FLASH_STATE.NET_STREAM.PLAY.STOP&&n!==this.FLASH_STATE.NET_STREAM.PLAY.STREAM_NOT_FOUND||this._onPause(),"error"===e.level?this._onDebug("onFlashCallState: ERROR - "+n):this._onDebug("onFlashCallState: state="+n)}},m._setName=function(){this._setMediaElement(),this._mediaElement.SetName(this._mediaElementId)},m._parseUrl=function(e){var t={url:"",streamname:""},n=e.lastIndexOf("/"),i=e.substr(0,n),r=e.substr(n,e-n);return t.url=i,t.streamname=r,t},m.STATE=d,m.FLASH_STATE=l,m.PAUSE_REASON=f,window._flashPlayers={},window.onFlashCallExternalApplicationReady=function(){return!0},window.onFlashCallInternalApplicationReady=function(e){window._flashPlayers[e]&&window._flashPlayers[e]._onFlashReady()},window.onFlashCallMyTrace=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onDebug(t)},window.onFlashCallAutoResizeContainer=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onResize(t)},window.onFlashCallVolumeChange=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onVolumeChange(t)},window.onFlashCallMetaDataReceived=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onMetaData(t)},window.onFlashCallCuePointReceived=function(e,t){window._flashPlayers[e]&&window._flashPlayers[e]._onCuePoint(t)},window.onFlashCallState=function(e,t,n){window._flashPlayers[e]&&window._flashPlayers[e]._onFlashState(t,n)},E}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){/**
	     * @license
	     * SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject> is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
	     */
var e=function(){function t(){if(!K&&document.getElementsByTagName("body")[0]){try{var e,t=y("span");t.style.display="none",e=k.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(e){return}K=!0;for(var n=V.length,i=0;i<n;i++)V[i]()}}function n(e){K?e():V[V.length]=e}function i(e){if(typeof F.addEventListener!==P)F.addEventListener("load",e,!1);else if(typeof k.addEventListener!==P)k.addEventListener("load",e,!1);else if(typeof F.attachEvent!==P)T(F,"onload",e);else if("function"==typeof F.onload){var t=F.onload;F.onload=function(){t(),e()}}else F.onload=e}function r(){var e=B.length;if(e>0)for(var t=0;t<e;t++){var n=B[t].id,i=B[t].callbackFn,r={success:!1,id:n};if(q.pv[0]>0){var u=m(n);if(u)if(!v(B[t].swfVersion)||q.wk&&q.wk<312)if(B[t].expressInstall&&a()){var l={};l.data=B[t].expressInstall,l.width=u.getAttribute("width")||"0",l.height=u.getAttribute("height")||"0",u.getAttribute("class")&&(l.styleclass=u.getAttribute("class")),u.getAttribute("align")&&(l.align=u.getAttribute("align"));for(var d={},f=u.getElementsByTagName("param"),h=f.length,E=0;E<h;E++)"movie"!==f[E].getAttribute("name").toLowerCase()&&(d[f[E].getAttribute("name")]=f[E].getAttribute("value"));s(l,d,n,i)}else c(u),i&&i(r);else A(n,!0),i&&(r.success=!0,r.ref=o(n),r.id=n,i(r))}else if(A(n,!0),i){var p=o(n);p&&typeof p.SetVariable!==P&&(r.success=!0,r.ref=p,r.id=p.id),i(r)}}}function o(e){var t=null,n=m(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==P?n:n.getElementsByTagName(w)[0]||n),t}function a(){return!j&&v("6.0.65")&&(q.win||q.mac)&&!(q.wk&&q.wk<312)}function s(e,t,n,i){var r=m(n);if(n=p(n),j=!0,O=i||null,I={success:!1,id:n},r){"OBJECT"===r.nodeName.toUpperCase()?(N=u(r),R=null):(N=r,R=n),e.id=M,(typeof e.width===P||!/%$/.test(e.width)&&_(e.width)<310)&&(e.width="310"),(typeof e.height===P||!/%$/.test(e.height)&&_(e.height)<137)&&(e.height="137");var o=q.ie?"ActiveX":"PlugIn",a="MMredirectURL="+encodeURIComponent(F.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+o+"&MMdoctitle="+encodeURIComponent(k.title.slice(0,47)+" - Flash Player Installation");if(typeof t.flashvars!==P?t.flashvars+="&"+a:t.flashvars=a,q.ie&&4!==r.readyState){var s=y("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",h(r)}d(e,t,n)}}function c(e){if(q.ie&&4!==e.readyState){e.style.display="none";var t=y("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),h(e)}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=y("div");if(q.win&&q.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(w)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;o<r;o++)1===i[o].nodeType&&"PARAM"===i[o].nodeName||8===i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function l(e,t){var n=y("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function d(e,t,n){var i,r=m(n);if(n=p(n),q.wk&&q.wk<312)return i;if(r){var o,a,s,c=y(q.ie?"div":w);typeof e.id===P&&(e.id=n);for(s in t)t.hasOwnProperty(s)&&"movie"!==s.toLowerCase()&&f(c,s,t[s]);q.ie&&(c=l(e.data,c.innerHTML));for(o in e)e.hasOwnProperty(o)&&(a=o.toLowerCase(),"styleclass"===a?c.setAttribute("class",e[o]):"classid"!==a&&"data"!==a&&c.setAttribute(o,e[o]));q.ie?H[H.length]=e.id:(c.setAttribute("type",x),c.setAttribute("data",e.data)),r.parentNode.replaceChild(c,r),i=c}return i}function f(e,t,n){var i=y("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function h(e){var t=m(e);t&&"OBJECT"===t.nodeName.toUpperCase()&&(q.ie?(t.style.display="none",function e(){if(4===t.readyState){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}else setTimeout(e,10)}()):t.parentNode.removeChild(t))}function E(e){return e&&e.nodeType&&1===e.nodeType}function p(e){return E(e)?e.id:e}function m(e){if(E(e))return e;var t=null;try{t=k.getElementById(e)}catch(e){}return t}function y(e){return k.createElement(e)}function _(e){return parseInt(e,10)}function T(e,t,n){e.attachEvent(t,n),W[W.length]=[e,t,n]}function v(e){e+="";var t=q.pv,n=e.split(".");return n[0]=_(n[0]),n[1]=_(n[1])||0,n[2]=_(n[2])||0,!!(t[0]>n[0]||t[0]===n[0]&&t[1]>n[1]||t[0]===n[0]&&t[1]===n[1]&&t[2]>=n[2])}function g(e,t,n,i){var r=k.getElementsByTagName("head")[0];if(r){var o="string"==typeof n?n:"screen";if(i&&(C=null,b=null),!C||b!==o){var a=y("style");a.setAttribute("type","text/css"),a.setAttribute("media",o),C=r.appendChild(a),q.ie&&typeof k.styleSheets!==P&&k.styleSheets.length>0&&(C=k.styleSheets[k.styleSheets.length-1]),b=o}C&&(typeof C.addRule!==P?C.addRule(e,t):typeof k.createTextNode!==P&&C.appendChild(k.createTextNode(e+" {"+t+"}")))}}function A(e,t){if(z){var n=t?"visible":"hidden",i=m(e);K&&i?i.style.visibility=n:"string"==typeof e&&g("#"+e,"visibility:"+n)}}function S(e){var t=/[\\"<>.;]/,n=null!==t.exec(e);return n&&typeof encodeURIComponent!==P?encodeURIComponent(e):e}var N,R,O,I,C,b,P="undefined",w="object",D="Shockwave Flash",L="ShockwaveFlash.ShockwaveFlash",x="application/x-shockwave-flash",M="SWFObjectExprInst",U="onreadystatechange",F=window,k=document,G=navigator,Y=!1,V=[],B=[],H=[],W=[],K=!1,j=!1,z=!0,X=!1,q=function(){var e=typeof k.getElementById!==P&&typeof k.getElementsByTagName!==P&&typeof k.createElement!==P,t=G.userAgent.toLowerCase(),n=G.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),r=n?/mac/.test(n):/mac/.test(t),o=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a="Microsoft Internet Explorer"===G.appName,s=[0,0,0],c=null;if(typeof G.plugins!==P&&typeof G.plugins[D]===w)c=G.plugins[D].description,c&&typeof G.mimeTypes!==P&&G.mimeTypes[x]&&G.mimeTypes[x].enabledPlugin&&(Y=!0,a=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=_(c.replace(/^(.*)\..*$/,"$1")),s[1]=_(c.replace(/^.*\.(.*)\s.*$/,"$1")),s[2]=/[a-zA-Z]/.test(c)?_(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof F.ActiveXObject!==P)try{var u=new ActiveXObject(L);u&&(c=u.GetVariable("$version"),c&&(a=!0,c=c.split(" ")[1].split(","),s=[_(c[0]),_(c[1]),_(c[2])]))}catch(e){}return{w3:e,pv:s,wk:o,ie:a,win:i,mac:r}}();(function(){q.w3&&((typeof k.readyState!==P&&("complete"===k.readyState||"interactive"===k.readyState)||typeof k.readyState===P&&(k.getElementsByTagName("body")[0]||k.body))&&t(),K||(typeof k.addEventListener!==P&&k.addEventListener("DOMContentLoaded",t,!1),q.ie&&(k.attachEvent(U,function e(){"complete"===k.readyState&&(k.detachEvent(U,e),t())}),F==top&&!function e(){if(!K){try{k.documentElement.doScroll("left")}catch(t){return void setTimeout(e,0)}t()}}()),q.wk&&!function e(){if(!K)return/loaded|complete/.test(k.readyState)?void t():void setTimeout(e,0)}()))})();return V[0]=function(){Y&&r()},function(){q.ie&&window.attachEvent("onunload",function(){for(var t=W.length,n=0;n<t;n++)W[n][0].detachEvent(W[n][1],W[n][2]);for(var i=H.length,r=0;r<i;r++)h(H[r]);for(var o in q)q[o]=null;q=null;for(var a in e)e[a]=null;e=null})}(),{registerObject:function(e,t,n,i){if(q.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,B[B.length]=r,A(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(q.w3)return o(e)},embedSWF:function(e,t,i,r,o,c,u,l,f,h){var E=p(t),m={success:!1,id:E};q.w3&&!(q.wk&&q.wk<312)&&e&&t&&i&&r&&o?(A(E,!1),n(function(){i+="",r+="";var n={};if(f&&typeof f===w)for(var p in f)n[p]=f[p];n.data=e,n.width=i,n.height=r;var y={};if(l&&typeof l===w)for(var _ in l)y[_]=l[_];if(u&&typeof u===w)for(var T in u)if(u.hasOwnProperty(T)){var g=X?encodeURIComponent(T):T,S=X?encodeURIComponent(u[T]):u[T];typeof y.flashvars!==P?y.flashvars+="&"+g+"="+S:y.flashvars=g+"="+S}if(v(o)){var N=d(n,y,t);n.id===E&&A(E,!0),m.success=!0,m.ref=N,m.id=N.id}else{if(c&&a())return n.data=c,void s(n,y,t,h);A(E,!0)}h&&h(m)})):h&&h(m)},switchOffAutoHideShow:function(){z=!1},enableUriEncoding:function(e){X=typeof e===P||e},ua:q,getFlashPlayerVersion:function(){return{major:q.pv[0],minor:q.pv[1],release:q.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(e,t,n){return q.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,i){q.w3&&a()&&s(e,t,n,i)},removeSWF:function(e){q.w3&&h(e)},createCSS:function(e,t,n,i){q.w3&&g(e,t,n,i)},addDomLoadEvent:n,addLoadEvent:i,getQueryParamValue:function(e){var t=k.location.search||k.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),!e)return S(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))===e)return S(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(j){var e=m(M);e&&N&&(e.parentNode.replaceChild(N,e),R&&(A(R,!0),q.ie&&(N.style.display="block")),O&&O(I)),j=!1}},version:"2.3"}}();return e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({VIDEO_DISPLAY:{CONNECTION_ERROR:"connectionError",LOADING:"loading",PLAYING:"playing",REWINDING:"rewinding",BUFFERING:"buffering",STOPPED:"stopped",DISCONNECTED:"disconnected"},NET_STREAM:{PLAY:{RESET:"NetStream.Play.Reset",UNPUBLISH_NOTIFY:"NetStream.Play.UnpublishNotify",PUBLISH_NOTIFY:"NetStream.Play.PublishNotify",PLAY:"NetStream.Play.Start",STOP:"NetStream.Play.Stop",STREAM_NOT_FOUND:"NetStream.Play.StreamNotFound"}}})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return{FORCE_NOT_SUPPORTED:'The forced tech "$tech$" is not supported by your browser.',SOURCE_NOT_SUPPORTED:"The players source configuration is malformed or missing, please check documentation for more information or contact us",CLIENT_NOT_SUPPORTED:"This browser does not fully support HTML5 and H5Live.\t            Supported are: Chrome >=54 (Windows, MacOSX, Android), Firefox >=48 (Windows, MacOSX, Android), Microsoft Edge (Windows), Microsoft Internet Explorer 11 (at least Windows 8), Safari (MacOSX & at least iOS 10)."}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e,t,n){function i(){for(var n in t)t.hasOwnProperty(n)&&e.on(t[n],o)}function r(){for(var n in t)t.hasOwnProperty(n)&&e.off(t[n],o)}function o(e){n.emit(e.name,e)}return i(),{destroy:r}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){}function t(e,t){return function(){e.apply(t,arguments)}}function n(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function i(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void n._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?r:o)(t.promise,e._value);var i;try{i=n(e._value)}catch(e){return void o(t.promise,e)}r(t.promise,i)}))}function r(e,i){try{if(i===e)throw new TypeError("A promise cannot be resolved with itself.");if(i&&("object"==typeof i||"function"==typeof i)){var r=i.then;if(i instanceof n)return e._state=3,e._value=i,void a(e);if("function"==typeof r)return void c(t(r,i),e)}e._state=1,e._value=i,a(e)}catch(t){o(e,t)}}function o(e,t){e._state=2,e._value=t,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)i(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,r(t,e))},function(e){n||(n=!0,o(t,e))})}catch(e){if(n)return;n=!0,o(t,e)}}var u=setTimeout;return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(t,n){var r=new this.constructor(e);return i(this,new s(t,n,r)),r},n.all=function(e){var t=Array.prototype.slice.call(e);return new n(function(e,n){function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(o,e)},n)}t[o]=a,0===--r&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var r=t.length,o=0;o<t.length;o++)i(o,t[o])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var i=0,r=e.length;i<r;i++)e[i].then(t,n)})},n._immediateFn="function"==typeof window.setImmediate&&function(e){window.setImmediate(e)}||function(e){u(e,0)},n._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},n._setImmediateFn=function(e){n._immediateFn=e},n._setUnhandledRejectionFn=function(e){n._unhandledRejectionFn=e},void 0===window.Promise&&(window.Promise=n),window.Promise}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(7),n(17),n(10),n(5),n(34),n(11),n(101),n(102),n(103),n(104),n(105),n(100),n(106),n(107),n(108),n(109),n(110),n(111),n(113),n(118),n(120),n(125)],r=function(e,t,n,i,r,o,a,s,c,u,l,d,f,h,E,p,m,y,_,T,v,g){"use strict";function A(){this.version=""}var S=(n.log,A.prototype=Object.create(i.prototype));return S.setBaseValues=function(e){console.log("NanoView api version: "+this.version),this.config=a.create(),this._playerDivId=e,this._emitter=new i,this._muted=!1},S.baseSetup=function(e){t.merge(e,this.config),t.clean(this.config),this.config.style.view&&(this.registerExternalEventHandler(),this._style=y.create(this._emitter,this._playerDivId,this.config.style),this.config.style.audioPlayer||(this._fullscreen=v.create(this._playerDivId,this._emitter),this._middleView=_.create(this._playerDivId),this._resizeListener=c.create(this._playerDivId,this._emitter))),this.config.style.controls&&(this._controls=g.create(this._playerDivId,this._emitter,this.config.style.audioPlayer))},S.postSetup=function(e){this._mediaElementId=e,this._mediaElement=this.getMediaElement(),this.config.style.view&&this._style.update(this._mediaElement),this.config.style.interactive&&!this.config.style.audioPlayer?(this._interactive=m.create(this._playerDivId,this._mediaElement,this._emitter),this._interactive.update(this.state)):this.config.style.controls&&this._controls.show(),this.registerInternalEventHandler()},S.getMediaElement=function(){var e=document.getElementById(this._mediaElementId);if(null===e&&r.isIOS11){var t=document.getElementById(this._playerDivId).querySelector("iframe");e=t.contentDocument.body.firstChild}return e},S.registerExternalEventHandler=function(){for(var e in d)d.hasOwnProperty(e)&&this._emitter.on(d[e],this._emit.bind(this,d[e]))},S.registerInternalEventHandler=function(){if(this._interactive&&(this._emitter.on(h.PLAYBUTTON_SINGLE_CLICK,function(e){this.state!==u.READY&&this.state!==u.PAUSED?this._emitter.emit(d.PAUSE):this._emitter.emit(d.PLAY)}.bind(this)),this._emitter.on(h.PLAYER_SINGLE_CLICK,function(e){this._controls&&this._controls.appear()}.bind(this))),this._controls){var e=[E.FULLSCREEN_ENTER,E.FULLSCREEN_EXIT];for(var t in E)E.hasOwnProperty(t)&&d.hasOwnProperty(t)&&(e.indexOf(E[t])===-1?this._emitter.on(E[t],this._emitter.emit.bind(this._emitter,d[t])):this._fullscreen&&this._emitter.on(E[t],function(e){this._fullscreen&&this._fullscreen.change()}.bind(this)))}if(this._fullscreen)for(var t in f)f.hasOwnProperty(t)&&(this._emitter.on(f[t],function(e){this.handleFullscreen(e&&e===f.FULLSCREEN_ENTER)}.bind(this).bind(this,f[t])),this._emitter.on(f[t],this._emitter.emit.bind(this._emitter,d[t])));this._resizeListener&&this._emitter.on(d.PLAYER_RESIZE,this._onPlayerResize.bind(this))},S.removeExternalEventHandler=function(){for(var e in d)d.hasOwnProperty(e)&&this._emitter.removeAllListeners(d[e])},S.removeInternalEventHandler=function(){if(this._interactive&&(this._emitter.removeAllListeners(h.PLAYER_SINGLE_CLICK),this._emitter.removeAllListeners(h.PLAYBUTTON_SINGLE_CLICK)),this._controls)for(var e in E)E.hasOwnProperty(e)&&d.hasOwnProperty(e)&&this._emitter.removeAllListeners(E[e]);if(this._fullscreen)for(var e in f)f.hasOwnProperty(e)&&this._emitter.removeAllListeners(f[e]);this._resizeListener&&this._emitter.removeAllListeners(d.PLAYER_RESIZE)},S.destroy=function(){this.removeExternalEventHandler(),this.removeInternalEventHandler(),this._resizeListener&&this._resizeListener.destroy(),this._style&&this._style.destroy(),this._interactive&&this._interactive.destroy(),this._scaling&&this._scaling.destroy(),this._middleView&&this._middleView.destroy(),this._controls&&this._controls.destroy(),this._fullscreen&&this._fullscreen.destroy(),this._emitter=null},S.update=function(e){this.state=e.state,this._emitter.emit(o.STATE_CHANGE,e),this.handleView(e.state),this._interactive&&this._interactive.update(e.state)},S.handleView=function(e){switch(this._viewTimeout&&clearTimeout(this._viewTimeout),e){case u.UNINITIALIZED:this._middleView&&this._middleView.update(p.ERROR);break;case u.IDLE:this._middleView&&this._middleView.update(p.NONE);break;case u.READY:this._middleView&&this._middleView.update(p.PLAYBUTTON),this._controls&&this._controls.play();break;case u.LOADING:this._middleView&&this._middleView.update(p.LOADING),this._controls&&this._controls.pause();break;case u.PLAYING:this.handleAudioOnly(),this._controls&&this._controls.pause();break;case u.PAUSED:this._middleView&&this._middleView.update(p.PLAYBUTTON),this._controls&&this._controls.play();break;case u.BUFFERING:this._viewTimeout=setTimeout(function(){this._middleView&&this._middleView.update(p.LOADING),this._controls&&this._controls.pause()}.bind(this),1e3);break;case u.UNKNOWN:this._middleView&&this._middleView.update(p.NONE)}},S.handleStreamInfo=function(e){this._emitter.emit(o.STREAM_INFO,e),this.streamInfo=e.data.streamInfo,this.streamInfo.haveVideo&&(this._scaling&&this._scaling.update(this.config.style.scaling),!this._scaling&&(this._scaling=T.create(this._playerDivId,this._mediaElement,this.streamInfo.videoInfo,this.config.style.scaling)))},S.handleAudioOnly=function(){this.state===u.PLAYING&&this.config.style.displayAudioOnly&&this.streamInfo&&!this.streamInfo.haveVideo&&this.streamInfo.haveAudio?this._middleView&&this._middleView.update(p.AUDIOONLY,this._muted):this._middleView&&this._middleView.update(p.NONE)},S.handleMute=function(e){this._controls&&(e?this._controls.mute():this._controls.unmute()),this._muted=e,this.handleAudioOnly()},S.handleVolume=function(e){this._controls&&this._controls.volume(e)},S.handleFullscreen=function(e){this._controls&&this._controls.fullscreen(e)},S.handleStats=function(e){this._controls&&this._controls.time(e.currentTime)},S.handleMetaData=function(e){if("object"==typeof e.data.message&&e.data.message.hasOwnProperty("nanoStreamStatus")){var t="object"==typeof e.data.message.nanoStreamStatus&&e.data.message.nanoStreamStatus.hasOwnProperty("VideoRotation")?e.data.message.nanoStreamStatus.VideoRotation:0;this._scaling&&this._scaling.update(this.config.style.scaling,t)}},S._emit=function(e,t){var n={};t&&t.name&&t.data?n=t:t?(n.data=t,n.name=e||"unknown"):(n.data={},n.name=e||"unknown"),n.player=this._playerDivId,n.state=this.state,this.emit(n.name,n)},S._onPlayerResize=function(e){this.handleView(this.state),this._scaling&&this._scaling.update(),this._controls&&this._controls.size()},A.events=d,A.emptyConfig=a,A}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({PAUSE:"ClickPause",PLAY:"ClickPlay",FULLSCREEN_ENTER:"ClickFullscreenEnter",FULLSCREEN_EXIT:"ClickFullscreenExit",PLAYER_RESIZE:"PlayerResize",MUTE:"ClickMute",UNMUTE:"ClickUnmute",VOLUME_CHANGE:"ClickVolumeChange"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{style:{width:void 0,height:void 0,aspectratio:void 0,controls:!0,interactive:!0,view:!0,scaling:"letterbox",keepFrame:!0,displayAudioOnly:!0,audioPlayer:!1}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{style:{width:"string",height:"string",aspectratio:"string",controls:"boolean",interactive:"boolean",view:"boolean",scaling:"string",keepFrame:"boolean",displayAudioOnly:"boolean",audioPlayer:"boolean"}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(100)],r=function(e){"use strict";function t(t,n){function i(){!o||o.clientWidth===a&&o.clientHeight===s||(a=o.clientWidth,s=o.clientHeight,u.emit(e.PLAYER_RESIZE,{width:a,height:s,aspectratio:a/s}))}function r(){return c&&clearInterval(c),c=0,o=null,null}var o=document.getElementById(t),a=o.clientWidth,s=o.clientHeight,c=0,u=n;return c=setInterval(i,100),{destroy:r}}return{create:t}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({UNINITIALIZED:1,IDLE:2,READY:3,LOADING:4,PLAYING:5,PAUSED:6,BUFFERING:7,UNKNOWN:8})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({CLICK:"click",DOUBLE_CLICK:"dblclick",TOUCH_START:"touchstart",TOUCH_END:"touchend",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_MOVE:"mousemove"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({FULLSCREEN_ENTER:"FullscreenEnter",FULLSCREEN_EXIT:"FullscreenExit"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({PLAYER_SINGLE_CLICK:"PlayerSingleClick",PLAYER_DOUBLE_CLICK:"PlayerDoubleClick",PLAYBUTTON_SINGLE_CLICK:"PlaybuttonSingleClick"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({PLAY:"ControlsPlay",PAUSE:"ControlsPause",MUTE:"ControlsMute",UNMUTE:"ControlsUnmute",VOLUME_CHANGE:"ControlsVolumeChange",FULLSCREEN_ENTER:"ControlsFullscreenEnter",FULLSCREEN_EXIT:"ControlsFullscreenExit"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({NONE:"none",LOADING:"loading",PLAYBUTTON:"playbutton",ERROR:"error",AUDIOONLY:"audioonly"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(7),n(107),n(100),n(105),n(104)],r=function(e,t,n,i,r){"use strict";function o(e,n,o){function a(){h.addEventListener(i.CLICK,u),n.addEventListener(i.CLICK,u),n.addEventListener("contextmenu",l)}function s(){h.removeEventListener(i.CLICK,u),n.removeEventListener(i.CLICK,u),n.removeEventListener("contextmenu",l)}function c(t){if(f=t,f===r.READY||f===r.PAUSED){var n=document.getElementById("playButton-"+e);n&&n.addEventListener(i.CLICK,u),s(),setTimeout(a,200)}}function u(e){e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.target.id&&e.target.id.indexOf("controls-")!==-1||e.button&&0!==e.button||E.touchInProgress||(E.touchInProgress=!0,e.target.id&&e.target.id.indexOf("playButton-")!==-1?o.emit(t.PLAYBUTTON_SINGLE_CLICK):o.emit(t.PLAYER_SINGLE_CLICK),E.timeout=setTimeout(function(){E.touchInProgress=!1,clearTimeout(E.timeout),E.timeout=0},300))}function l(e){return e.preventDefault(),!1}function d(){return s(),E.timeout&&clearTimeout(E.timeout),E.timeout=0,n=null,h=null,null}var f,h=document.getElementById(e),E={timeout:0,touchInProgress:!1};return{update:c,destroy:d}}return{create:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(7),n(112),n(11),n(20),n(22)],r=function(e,t,n,i,r){"use strict";function o(o,a,s){function c(t){h=document.getElementById(a);var n,i,r,o,s,c=["width","height"],u=0;"auto"!==t.width&&"auto"!==t.height?t.audioPlayer?t.width&&t.height?(h.style.width=t.width,h.style.height=t.height):t.width?(h.style.width=t.width,h.style.height=Math.round(e.mobile?100/6:100/12)/100*h.clientWidth+"px"):h.clientWidth||h.clientHeight?h.clientWidth&&(h.style.height=Math.round(e.mobile?100/6:100/12)/100*h.clientWidth+"px"):(h.style.width="640px",h.style.height=Math.round(e.mobile?100/6:100/12)/100*h.clientWidth+"px"):t.width&&t.height?(h.style.width=t.width,h.style.height=t.height):(t.width||t.height)&&t.aspectratio?(u=+!!t.height,r=t[c[u]].indexOf("%")!==-1,o=t[c[u]].indexOf("px")!==-1,h.style[c[u]]=t[c[u]],s=t.aspectratio.split("/"),s[0]=parseInt(s[0]),s[1]=parseInt(s[1]),(r||o)&&(n=parseInt(t[c[u]].replace(r?"%":"px","")),i=Math.round(n*s[+!u]/s[u]).toString()+(r?"%":"px"),h.style[c[+!u]]=i)):(t.width||t.height)&&(t.width||t.aspectratio)&&(t.aspectratio||t.height)||h.clientWidth&&h.clientHeight||(h.style.width="640px",h.style.height="360px"):h.clientWidth||h.clientHeight?h.clientWidth||"auto"!==t.width?h.clientHeight||(t.aspectratio&&!t.audioPlayer?(s=t.aspectratio.split("/"),s[0]=parseInt(s[0]),s[1]=parseInt(s[1]),h.style.height=Math.round(h.clientWidth/s[0]*s[1]).toString()+"px"):h.style.height=t.audioPlayer?Math.round(e.mobile?100/6:100/12)/100*h.clientWidth+"px":Math.round(h.clientWidth/16*9).toString()+"px"):t.aspectratio?(s=t.aspectratio.split("/"),s[0]=parseInt(s[0]),s[1]=parseInt(s[1]),h.style.width=Math.round(h.clientHeight*s[0]/s[1]).toString()+"px"):h.style.width=Math.round(16*h.clientHeight/9).toString()+"px":(h.style.width="640px",h.style.height=t.audioPlayer?Math.round(e.mobile?100/6:100/12)/100*h.clientWidth+"px":"360px"),h.style.overflow="hidden",h.style.position="relative",h.style.backgroundColor=t.audioPlayer?"transparent":"black"}function u(e){p=e,p&&(!y&&r.add({target:o,listeners:m}),p.style.width="100%",p.style.height="100%",p.style.position="absolute",p.style.left="50%",p.style.top="50%",p.style.marginRight="-50%",p.style.backgroundColor=s.audioPlayer?"transparent":"black",t.normalize(p,"transform","translate(-50%, -50%)"))}function l(){return r.remove({target:o,listeners:m}),h=null,p=null,null}function d(e){E=e.state,s.audioPlayer?p.style.visibility="hidden":E==i.READY?!s.keepFrame&&(p.style.visibility="hidden"):E==i.PAUSED?!s.keepFrame&&(p.style.visibility="hidden"):E==i.PLAYING&&!s.keepFrame&&(p.style.visibility="visible")}function f(e){s.audioPlayer&&(p.style.visibility="hidden")}var h,E,p,m=[{type:n.STATE_CHANGE,listener:d},{type:n.STREAM_INFO,listener:f}],y=!1;return c(s),{update:u,destroy:l}}return{create:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(e,n,i){for(var r=t(n),o="",a=0;a<r.length;a+=1)if(o=r[a],o in e.style){e.style[o]=i;break}}function t(e){var t=e.length-1,n=e.substr(0,1).toUpperCase()+e.substr(1,t);return["webkit"+n,"moz"+n,"ms"+n,e]}return{normalize:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(112),n(109),n(114),n(115),n(116),n(117)],r=function(e,t,n,i,r,o){"use strict";function a(a){function s(){if(!document.getElementById(p)){var t=u();m.id=p,m.style.width=t.width+"px",m.style.height=t.height+"px",m.style.position="absolute",m.style.left="50%",m.style.top="50%",m.style.marginRight="-50%",e.normalize(m,"transform","translate(-50%, -50%)"),m.style.zIndex=1e3,E.appendChild(m)}}function c(){document.getElementById(p)&&E.removeChild(m)}function u(){var e=document.getElementById(a),t=.2,n=Math.round(Math.min(e.clientWidth,e.clientHeight)*t);return{width:n,height:n}}function l(e,n){h&&h.destroy&&(h.destroy(),h=null),e&&e!==t.NONE?(s(),h=f[e].create(a,m,u,n)):c()}function d(){return h&&h.destroy&&(h.destroy(),h=null),c(),m=null,E=null,null}var f={loading:n,playbutton:i,error:r,audioonly:o},h=null,E=document.getElementById(a),p="middleView-"+a,m=document.createElement("div");return{update:l,destroy:d}}return{create:a}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(e,t,n){function i(){var e=n();for((t.style.width=e.width+"px")&&(o.width=t.clientWidth),(t.style.height=e.height+"px")&&(o.height=t.clientHeight),a.xCenter=o.width/2,a.yCenter=o.height/2,a.radius=o.width/3,a.startSize=a.radius/3,a.num++,a.ctx.clearRect(0,0,2*a.xCenter,2*a.yCenter),a.i=0;a.i<9;a.i++)a.ctx.beginPath(),a.ctx.fillStyle="rgba(255,255,255,"+.1*a.i+")",a.angle=a.pi*a.i*.25,a.posX[a.i]=a.xCenter+a.radius*Math.cos(a.angle),a.posY[a.i]=a.yCenter+a.radius*Math.sin(a.angle),a.ctx.arc(a.posX[(a.i+a.num)%8],a.posY[(a.i+a.num)%8],a.startSize/9*a.i,0,2*a.pi,1),a.ctx.fill()}function r(){return a.interval&&clearInterval(a.interval),a.interval=0,a.ctx&&a.ctx.clearRect(0,0,o.width,o.height),t.removeChild(o),o=null,null}var o=document.createElement("canvas"),a={id:"loadingSign-"+e,interval:setInterval(i,100),ctx:o.getContext("2d"),pi:Math.PI,xCenter:void 0,yCenter:void 0,radius:void 0,startSize:void 0,num:5,posX:[],posY:[],angle:void 0,size:void 0,i:void 0};return o.id=a.id,o.style.zIndex=1001,t.appendChild(o),{destroy:r}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(e,t,n){function i(){var e=n();(t.style.width=e.width+"px")&&(o.width=t.clientWidth),(t.style.height=e.height+"px")&&(o.height=t.clientHeight);var i=o.width;a.ctx.beginPath(),a.ctx.fillStyle="transparent",a.ctx.arc(.5*i,.5*i,.45*i,0,2*Math.PI),a.ctx.fill(),a.ctx.lineWidth=.05*i,a.ctx.strokeStyle="rgba(255,255,255,0.7)",a.ctx.stroke(),a.ctx.fillStyle="rgba(255,255,255,0.7)",a.ctx.beginPath(),a.ctx.moveTo(.35*i,.25*i),a.ctx.lineTo(.35*i,.75*i),a.ctx.lineTo(.75*i,.5*i),a.ctx.fill()}function r(){return a.ctx&&a.ctx.clearRect(0,0,o.width,o.height),t.removeChild(o),o=null,null}var o=document.createElement("canvas"),a={id:"playButton-"+e,ctx:o.getContext("2d")};return o.id=a.id,o.style.zIndex=1001,t.appendChild(o),i(),{destroy:r}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(e,t,n){function i(){var e=n();(t.style.width=e.width+"px")&&(o.width=t.clientWidth),(t.style.height=e.height+"px")&&(o.height=t.clientHeight);var i=o.width,r=.8*i,s=.7*i,c=.1*i,u="#ffc821",l="#faf100",d="#dcaa09",f=.05*i;a.ctx.beginPath(),a.ctx.moveTo(c+r/2,c),a.ctx.lineTo(c+r,s+c),a.ctx.lineTo(c,s+c),a.ctx.closePath();var h=a.ctx.createLinearGradient(0,0,0,s);h.addColorStop(0,u),h.addColorStop(1,l),a.ctx.lineWidth=2*f,a.ctx.lineJoin="round",a.ctx.strokeStyle=h,a.ctx.stroke(),a.ctx.fillStyle=h,a.ctx.fill(),h=a.ctx.createLinearGradient(0,c,0,c+s),h.addColorStop(0,"transparent"),h.addColorStop(.5,"transparent"),h.addColorStop(.5,d),h.addColorStop(1,l),a.ctx.fillStyle=h,a.ctx.fill(),a.ctx.lineWidth=f,a.ctx.lineJoin="round",a.ctx.strokeStyle="#333",a.ctx.stroke(),a.ctx.textAlign="center",a.ctx.textBaseline="middle",a.ctx.font="bold "+Math.round(s/1.3)+'px "Times New Roman", Times, serif',a.ctx.fillStyle="#333";try{a.ctx.fillText("!",c+r/2,c+s/1.7)}catch(e){}}function r(){return a.ctx&&a.ctx.clearRect(0,0,o.width,o.height),t.removeChild(o),o=null,null}var o=document.createElement("canvas"),a={id:"exclamationSign-"+e,ctx:o.getContext("2d")};return o.id=a.id,o.style.zIndex=1001,t.appendChild(o),i(),{destroy:r}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(e,t,n,i){function r(){var e=n();(t.style.width=e.width+"px")&&(f.width=t.clientWidth),(t.style.height=e.height+"px")&&(f.height=t.clientHeight);var r=E.ctx,a=f.width,p={l175:o(.175*a),l20:o(.2*a),l30:o(.3*a),l37:o(.37*a),l50:o(.5*a),l63:o(.63*a),l825:o(.825*a)};r.beginPath(),r.fillStyle="rgba(255,255,255,1)",r.strokeStyle="rgba(255,255,255,1)",r.lineJoin="round",r.moveTo(p.l20,p.l37),r.lineTo(p.l20,p.l63),r.lineTo(p.l30,p.l63),r.lineTo(p.l50,p.l825),r.lineTo(p.l50,p.l175),r.lineTo(p.l30,p.l37),r.fill(),r.lineWidth=o(.1*a),r.lineCap="round",i&&(r.strokeStyle="rgba(255,255,255,0.2)"),s=c=f.width/2,u=.3*a,l=1.6*Math.PI,d=.4*Math.PI,r.beginPath(),r.arc(s,c,u,l,d,h),r.stroke(),u=.15*a,l=1.7*Math.PI,d=.3*Math.PI,r.beginPath(),r.arc(s,c,u,l,d,h),r.stroke()}function o(e){return Math.round(e)}function a(){return E.ctx&&E.ctx.clearRect(0,0,f.width,f.height),t.removeChild(f),f=null,null}var s,c,u,l,d,f=document.createElement("canvas"),h=!1,E={id:"audioOnly-"+e,
ctx:f.getContext("2d")};return f.id=E.id,f.style.zIndex=1001,t.appendChild(f),r(),{destroy:a}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(112),n(119)],r=function(e,t){"use strict";function n(n,i,r,o){function a(){return{width:l.clientWidth,height:l.clientHeight}}function s(t){if(i){t="undefined"==typeof t?0:t;var n=a(),s=["100%","100%"],c=n.width/n.height,u=c-d,f=1,h=1;switch(o){case"letterbox":t%180&&(f/=d,h/=d);break;case"crop":u<0?(h=n.height/(n.width/d),f=h):u>0&&(f=n.width/(n.height*d),h=f),t%180&&(f*=u,h*=u);break;case"fill":u<0?h=n.height/(n.width/d):u>0&&(f=n.width/(n.height*d));break;case"original":s[0]=r.width+"px",s[1]=r.height+"px";break;case"resize":"fixed"!==l.style.position&&(s[0]=r.width+"px",s[1]=r.height+"px",l.style.width=s[0],l.style.height=s[1])}e.normalize(i,"transform","translate(-50%, -50%) scaleX("+f+") scaleY("+h+") rotate("+t+"deg)"),i.style.width=s[0],i.style.height=s[1]}}function c(e,n){o=e||t.LETTERBOX,s(n)}function u(){return i=null,l=null,null}o=o||t.LETTERBOX;var l=document.getElementById(n),d=r.width/r.height;return s(),{update:c,destroy:u}}return{create:n}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({NONE:"none",LETTERBOX:"letterbox",CROP:"crop",FILL:"fill"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(121),n(124)],r=function(e,t){"use strict";function n(n,r){return i()?e.create(n,r):t.create(n,r)}function i(){return document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen}return{create:n}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(122),n(123),n(106)],r=function(e,t,n){"use strict";function i(i,r){function o(){for(var e in t)t.hasOwnProperty(e)&&document.addEventListener(t[e],s)}function a(){for(var e in t)t.hasOwnProperty(e)&&document.removeEventListener(t[e],s)}function s(e){e.target===h&&(c()?(h.style.width="100vw",h.style.height="100vh"):h.style.cssText=p)}function c(){var e=u();return e===h}function u(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function l(){try{c()?(document.exitFullScreen&&document.exitFullScreen(),E=e.EXITED,r.emit(n.FULLSCREEN_EXIT)):(h.requestFullScreen&&h.requestFullScreen(),E=e.ENTERED,r.emit(n.FULLSCREEN_ENTER))}catch(e){}}function d(){l()}function f(){return a(),c()&&(document.exitFullScreen&&document.exitFullScreen(),E=e.EXITED,r.emit(n.FULLSCREEN_EXIT)),h=null,null}var h=document.getElementById(i),E=e.EXITED;h.requestFullScreen=h.requestFullscreen||h.mozRequestFullScreen||h.webkitRequestFullscreen||h.msRequestFullscreen,document.exitFullScreen=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;var p=h.style.cssText;return o(),{change:d,destroy:f}}return{create:i}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({ENTERED:"entered",EXITED:"exited"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({FULLSCREEN_CHANGE:"fullscreenChange",WEBKIT_FULLSCREEN_CHANGE:"webkitfullscreenchange",MOZ_FULLSCREEN_CHANGE:"mozfullscreenchange",MS_FULLSCREEN_CHANGE:"MSFullscreenChange"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(112),n(122),n(106)],r=function(e,t,n){"use strict";function i(e,i){function r(){var e,t=document.querySelectorAll("meta");for(e=0;e<t.length;++e){var n=t[e].getAttribute("name");n&&"viewport"===n.toLowerCase()&&(p=!0)}}function o(){return f===t.ENTERED}function a(){try{o()?(clearInterval(m),d.style.cssText=h,f=t.EXITED,i.emit(n.FULLSCREEN_EXIT)):(m=setInterval(c,300),h=d.style.cssText,E=document.body.style.cssText,d.style.position="fixed",d.style.left=0,d.style.top=0,s(),f=t.ENTERED,i.emit(n.FULLSCREEN_ENTER))}catch(e){}}function s(){var e=1,t=0;e=document.documentElement.clientWidth/window.innerWidth,t=(0===window.orientation?screen.height:screen.width)-window.innerWidth*e,t=t>1&&!p?t:0,d.style.width=window.innerWidth*e+"px",d.style.height=window.innerHeight*e-t+"px"}function c(){try{o()&&s()}catch(e){}}function u(){a()}function l(){return o()&&a(),d=null,null}var d=document.getElementById(e),f=t.EXITED,h="",E="",p=!1,m=0;return r(),{change:u,destroy:l}}return{create:i}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(7),n(105),n(127),n(128),n(122),n(126),n(129),n(130),n(131),n(132)],r=function(e,t,n,i,r,o,a,s,c,u){"use strict";function l(l,d,f){function h(){P&&(P.style.visibility="visible")}function E(){P&&(P.style.visibility="hidden")}function p(){document.getElementById(b)||(P.id=b,P.style.width="100%",P.style.height=(f?"100":Math.round(e.mobile?100/6:100/12))+"%",P.style.maxHeight=C.clientWidth/8+"px",P.style.position="absolute",P.style.left="0",P.style.bottom="0",P.style.zIndex=2352346258378,P.style.backgroundColor=f?"white":"rgba(255,255,255,0.7)",!f&&E(),C.appendChild(P),D.timeControl=u.create(P,d),D.playPauseControl=o.create(P,d),D.muteControl=a.create(P,d,f),D.volumeControl=s.create(P,d,f),!f&&(D.fullscreenControl=c.create(P,d)),!f&&C.addEventListener(t.MOUSE_MOVE,_,!0))}function m(){P.style.zIndex=2352346258378}function y(){P.style.width="100%";var t=Math.round(e.mobile?C.clientHeight/6:C.clientHeight/12),n=Math.round(e.mobile?P.clientWidth/8:P.clientWidth/12);P.style.height=(f?"100":Math.min(t,n))+"px",P.style.maxHeight=C.clientWidth/8+"px";for(var i in D)D[i].update&&D[i].update()}function _(e){e.button&&0!==e.button||e.target.id&&e.target.id.indexOf("playButton-")!==-1||T()}function T(){w&&clearTimeout(w),w=0,w=setTimeout(E,5e3),h()}function v(){D.playPauseControl.update(n.PLAY)}function g(){D.playPauseControl.update(n.PAUSE)}function A(e){f||(m(),e?D.fullscreenControl.update(r.ENTERED):D.fullscreenControl.update(r.EXITED))}function S(){D.muteControl.update(i.MUTED)}function N(){D.muteControl.update(i.UNMUTED)}function R(e){D.volumeControl.update(e)}function O(e){D.timeControl.update(e)}function I(){w&&clearTimeout(w);for(var e in D)"undefined"!=typeof D[e]&&D[e].destroy(),delete D[e];return f&&C.removeEventListener(t.MOUSE_MOVE,_),C.removeChild(P),P=null,C=null,null}var C=document.getElementById(l),b="controls-"+l,P=document.createElement("div"),w=0,D={playPauseControl:void 0,muteControl:void 0,volumeControl:void 0,fullscreenControl:void 0,timeControl:void 0};return p(),{size:y,appear:T,show:h,hide:E,play:v,pause:g,fullscreen:A,mute:S,unmute:N,volume:R,time:O,destroy:I}}return{create:l}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(7),n(105),n(108),n(127)],r=function(e,t,n,i){"use strict";function r(r,o){function a(){h.ctx&&h.ctx.clearRect(0,0,d.width,d.height),d.width=d.height=r.clientHeight,d.style.left=0;var e=d.width,t={l20:s(.2*e),l30:s(.3*e),l45:s(.45*e),l50:s(.5*e),l55:s(.55*e),l70:s(.7*e),l75:s(.75*e),l80:s(.8*e)};f===i.PLAY?(h.ctx.beginPath(),h.ctx.fillStyle="rgba(0,0,0,1)",h.ctx.moveTo(t.l30,t.l20),h.ctx.lineTo(t.l30,t.l80),h.ctx.lineTo(t.l75,t.l50),h.ctx.fill()):f===i.PAUSE&&(h.ctx.beginPath(),h.ctx.fillStyle="rgba(0,0,0,1)",h.ctx.moveTo(t.l30,t.l20),h.ctx.lineTo(t.l30,t.l80),h.ctx.lineTo(t.l45,t.l80),h.ctx.lineTo(t.l45,t.l20),h.ctx.moveTo(t.l55,t.l20),h.ctx.lineTo(t.l55,t.l80),h.ctx.lineTo(t.l70,t.l80),h.ctx.lineTo(t.l70,t.l20),h.ctx.fill())}function s(e){return Math.floor(e)}function c(e){e&&(f=e),a()}function u(){h.ctx&&h.ctx.clearRect(0,0,d.width,d.height),r.removeChild(d),d=null}function l(e){f===i.PLAY?o.emit(n.PLAY):f===i.PAUSE&&o.emit(n.PAUSE)}var d=document.createElement("canvas"),f=i.PLAY,h={id:"playpause-"+r.id,ctx:d.getContext("2d")};return d.id=h.id,d.style.left=0,d.style.position="absolute",d.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,l),r.appendChild(d),a(),{update:c,destroy:u}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({PLAY:"play",PAUSE:"pause"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){return Object.freeze({MUTED:"muted",UNMUTED:"unmuted"})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(7),n(105),n(108),n(128)],r=function(e,t,n,i){"use strict";function r(r,o,a){function s(){v.ctx&&v.ctx.clearRect(0,0,y.width,y.height),y.width=y.height=r.clientHeight,y.style.right=r.clientHeight*g+"px";var e=y.width,t={l175:c(.175*e),l20:c(.2*e),l30:c(.3*e),l37:c(.37*e),l50:c(.5*e),l63:c(.63*e),l825:c(.825*e)};v.ctx.beginPath(),v.ctx.fillStyle="rgba(0,0,0,1)",v.ctx.strokeStyle="rgba(0,0,0,1)",v.ctx.lineJoin="round",v.ctx.moveTo(t.l20,t.l37),v.ctx.lineTo(t.l20,t.l63),v.ctx.lineTo(t.l30,t.l63),v.ctx.lineTo(t.l50,t.l825),v.ctx.lineTo(t.l50,t.l175),v.ctx.lineTo(t.l30,t.l37),v.ctx.fill(),v.ctx.lineWidth=c(.1*e),v.ctx.lineCap="round",_===i.MUTED&&(v.ctx.strokeStyle="rgba(0,0,0,0.2)"),f=h=y.width/2,E=.3*e,p=1.6*Math.PI,m=.4*Math.PI,v.ctx.beginPath(),v.ctx.arc(f,h,E,p,m,T),v.ctx.stroke(),E=.15*e,p=1.7*Math.PI,m=.3*Math.PI,v.ctx.beginPath(),v.ctx.arc(f,h,E,p,m,T),v.ctx.stroke()}function c(e){return Math.round(e)}function u(e){e&&(_=e),s()}function l(){v.ctx&&v.ctx.clearRect(0,0,y.width,y.height),r.removeChild(y),y=null}function d(e){_===i.MUTED?o.emit(n.UNMUTE):_===i.UNMUTED&&o.emit(n.MUTE)}var f,h,E,p,m,y=document.createElement("canvas"),_=i.UNMUTED,T=!1,v={id:"mute-"+r.id,ctx:y.getContext("2d")},g=+!a+3;return y.id=v.id,y.style.right=r.clientHeight*g+"px",y.style.position="absolute",y.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,d),r.appendChild(y),s(),{update:u,destroy:l}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(7),n(105),n(108),n(128)],r=function(e,t,n,i){"use strict";function r(i,r,o){function a(){A.ctx&&A.ctx.clearRect(0,0,T.width,T.height),T.height=i.clientHeight,T.style.right=i.clientHeight*S+"px",T.width=3*T.height,d=T.width,f=T.height,A.ctx.beginPath(),A.ctx.strokeStyle="rgba(0,0,0,1)",A.ctx.lineJoin="round",h=s(d*v),E=s(f*(1-g)),p=s(d*(1-v)),m=s(f*g),A.ctx.moveTo(h,E),A.ctx.lineTo(p,E),A.ctx.lineTo(p,m),A.ctx.fillStyle="rgba(0,0,0,0.2)",A.ctx.fill(),A.value&&(A.ctx.closePath(),A.ctx.beginPath(),y=s(h+A.value*(p-h)),_=s(E-A.value*(E-m)),A.ctx.moveTo(h,E),A.ctx.lineTo(y,E),A.ctx.lineTo(y,_),A.ctx.fillStyle="rgba(0,0,0,1)",A.ctx.fill())}function s(e){return Math.round(e)}function c(e){e&&(A.value=e),a()}function u(){A.ctx&&A.ctx.clearRect(0,0,T.width,T.height),i.removeChild(T),T=null}function l(e){var t=e.target||e.srcElement,i=t.currentStyle||window.getComputedStyle(t,null),o=parseInt(i.borderLeftWidth,10),a=parseInt(i.borderTopWidth,10),s=t.getBoundingClientRect(),c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e.touches&&e.touches.length?e.touches[0]:{clientX:s.left,clientY:s.top},u=(e.clientX?e.clientX:c.clientX)-o-s.left,l=((e.clientY?e.clientY:c.clientY)-a-s.top,0);u>h&&u<p?l=(u-h)/(p-h):u>p&&(l=1);var d=Math.round(100*l)/100;r.emit(n.VOLUME_CHANGE,{volume:d})}var d,f,h,E,p,m,y,_,T=document.createElement("canvas"),v=.1,g=.15,A={id:"volume-"+i.id,ctx:T.getContext("2d"),value:1},S=+!o;return T.id=A.id,T.style.right=i.clientHeight*S+"px",T.style.position="absolute",T.style.display="block",T.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,l),i.appendChild(T),a(),{update:c,destroy:u}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(7),n(105),n(108),n(122)],r=function(e,t,n,i){"use strict";function r(r,o){function a(){E.ctx&&E.ctx.clearRect(0,0,f.width,f.height),f.width=f.height=r.clientHeight,f.style.right=0;var e=f.width,t={l20:s(.2*e),l35:s(.35*e),l65:s(.65*e),l80:s(.8*e)};E.ctx.beginPath(),E.ctx.strokeStyle="rgba(0,0,0,1)",E.ctx.lineCap="round",E.ctx.lineWidth=c(.1*e),h===i.ENTERED?(E.ctx.beginPath(),E.ctx.moveTo(t.l20,t.l35),E.ctx.lineTo(t.l35,t.l35),E.ctx.lineTo(t.l35,t.l20),E.ctx.stroke(),E.ctx.beginPath(),E.ctx.moveTo(t.l65,t.l20),E.ctx.lineTo(t.l65,t.l35),E.ctx.lineTo(t.l80,t.l35),E.ctx.stroke(),E.ctx.beginPath(),E.ctx.moveTo(t.l80,t.l65),E.ctx.lineTo(t.l65,t.l65),E.ctx.lineTo(t.l65,t.l80),E.ctx.stroke(),E.ctx.beginPath(),E.ctx.moveTo(t.l35,t.l80),E.ctx.lineTo(t.l35,t.l65),E.ctx.lineTo(t.l20,t.l65),E.ctx.stroke()):h===i.EXITED&&(E.ctx.beginPath(),E.ctx.moveTo(t.l20,t.l35),E.ctx.lineTo(t.l20,t.l20),E.ctx.lineTo(t.l35,t.l20),E.ctx.stroke(),E.ctx.beginPath(),E.ctx.moveTo(t.l65,t.l20),E.ctx.lineTo(t.l80,t.l20),E.ctx.lineTo(t.l80,t.l35),E.ctx.stroke(),E.ctx.beginPath(),E.ctx.moveTo(t.l80,t.l65),E.ctx.lineTo(t.l80,t.l80),E.ctx.lineTo(t.l65,t.l80),E.ctx.stroke(),E.ctx.beginPath(),E.ctx.moveTo(t.l35,t.l80),E.ctx.lineTo(t.l20,t.l80),E.ctx.lineTo(t.l20,t.l65),E.ctx.stroke(),E.ctx.stroke())}function s(e){return Math.floor(e)+.5}function c(e){return Math.round(e)}function u(e){e&&(h=e),a()}function l(){E.ctx&&E.ctx.clearRect(0,0,f.width,f.height),r.removeChild(f),f=null}function d(e){h===i.EXITED?o.emit(n.FULLSCREEN_ENTER):h===i.ENTERED&&o.emit(n.FULLSCREEN_EXIT)}var f=document.createElement("canvas"),h=i.EXITED,E={id:"fullscreen-"+r.id,ctx:f.getContext("2d")};return f.id=E.id,f.style.right=0,f.style.position="absolute",f.addEventListener(e.mobile?t.TOUCH_END:t.MOUSE_UP,d),r.appendChild(f),a(),{update:u,destroy:l}}return{create:r}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(e,t){function n(){u.ctx&&u.ctx.clearRect(0,0,s.width,s.height);var t=s.height=e.clientHeight;s.style.left=1*e.clientHeight+"px";var n=s.width=3*s.height;u.ctx.textAlign="left",u.ctx.textBaseline="middle",u.ctx.font="bold "+i(.6*t)+'px "Arial"',u.ctx.fillStyle="rgba(0,0,0,1)";try{u.ctx.fillText(c,i(.1*n),i(.5*t))}catch(e){}}function i(e){return Math.round(e)}function r(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),e=Math.floor(e-3600*t-60*n),i="";return 0!=t&&(i=t+":"),n=n<10&&""!==i?"0"+n:String(n),i+=n+":",i+=e<10?"0"+e:String(e)}function o(e){e&&(c=r(e)),n()}function a(){u.ctx&&u.ctx.clearRect(0,0,s.width,s.height),e.removeChild(s),s=null}var s=document.createElement("canvas"),c="0:00",u={id:"time-"+e.id,ctx:s.getContext("2d")};return s.id=u.id,s.style.left=1*e.clientHeight+"px",s.style.position="absolute",e.appendChild(s),n(),{update:o,destroy:a}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(134),n(135),n(136)],r=function(e,t,n){"use strict";function i(e){var n;return new Promise(function(i,r){e.source.bintu?(e.source.bintu.apiurl||(e.source.bintu.apiurl="https://bintu.nanocosmos.de"),e.source.bintu.streamid||r(Error("No bintu streamid passed")),n=new t(e.source.bintu.apiurl,null,null,"player"),n.getStream(e.source.bintu.streamid,function(t){try{var n=JSON.parse(t.responseText),o=(n.id,n.state,n.playout),a=o.rtmp,s=o.hls,c=o.h5live;if(a&&!a.length&&!c||c&&!c.length)r(Error("Could not find stream. The stream is not live."));else{if(s&&s.length){var u=s[0].url;e.source.hls=u}if(c&&c.length){if(e.source.h5live=e.source.h5live||{},!e.source.h5live.server&&(e.source.h5live.server={}))for(var l in c[0].server)c[0].server.hasOwnProperty(l)&&(e.source.h5live.server[l]=c[0].server[l].replace("bintu-stream","bintu-h5live"));e.source.h5live.rtmp={},e.source.h5live.rtmp.url=c[0].rtmp.url,e.source.h5live.rtmp.streamname=c[0].rtmp.streamname}else a&&a.length&&(e.source.h5live=e.source.h5live||{},e.source.h5live.rtmp={},e.source.h5live.rtmp.url=c[0].rtmp.url,e.source.h5live.rtmp.streamname=c[0].rtmp.streamname)}i(e)}catch(e){var d=e.message||"unknown error";r(Error(d))}},function(e){var t=e.error||"unknown error";t+=" - "+e.request.responseText,r(Error(t))})):i(e)})}return{setup:i,emptyConfig:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){function e(){return{source:{bintu:{apiurl:"",streamid:""}}}}return{create:e}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";var e=function(e,t,n,i){if(!(e.length>0&&("string"==typeof e||e instanceof String)))throw new Error("The param 'apiUrl' must be of type 'string' and also may not be empty string.");if(this.apiUrl=e,t&&("string"==typeof t||t instanceof String)&&(this.apiKey=t),n&&("string"==typeof n||n instanceof String)&&(this.playerKey=n),i&&("string"==typeof i||i instanceof String)){if("api"!==i&&"player"!==i)throw new Error("The param 'keyMode' must be 'api', 'player' or undefined");this.keyMode=i}},t=e.prototype,n=function(e,t,n,i,r,o){var a=this;a.method=e||"GET",a.url=t||"http://localhost:8088",a.header=n||{},a.async=i||!0,a.onSuccess=r||function(e){},a.onError=o||function(e){},a.Send=function(e){var t=new XMLHttpRequest;t.open(a.method,a.url,a.async);for(var n in a.header)t.setRequestHeader(n,a.header[n]);if(t.onreadystatechange=function(){4===t.readyState&&200===t.status?"function"==typeof a.onSuccess&&a.onSuccess(t):4===t.readyState&&200!==t.status&&"function"==typeof a.onError&&a.onError({error:"onstatuserror",request:t})},t.onabort=function(){"function"==typeof a.onError&&a.onError({error:"onabort",request:t})},t.onerror=function(){"function"==typeof a.onError&&a.onError({error:"onerror",request:t})},t.ontimeout=function(){"function"==typeof a.onError&&a.onError({error:"ontimeout",request:t})},"undefined"!=typeof e){if("string"==typeof e)try{e=JSON.parse(e)}catch(n){e=null,"function"==typeof a.onError&&a.onError({error:"invalid json string",request:t})}if("object"==typeof e)try{e=JSON.stringify(e),t.send(e)}catch(e){"function"==typeof a.onError&&a.onError({error:"invalid json object",request:t})}}else t.send()}};return t.apiKey=null,t.apiUrl=null,t.playerKey=null,t.keyMode="api",t.createStream=function(e,t,i){if(!this.apiUrl)return"function"==typeof i&&i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return"function"==typeof i&&i({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return"function"==typeof i&&i({error:"wrong key mode set",request:{responseText:"no response error"}});var r=new n("POST",this.apiUrl+"/stream");r.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey},r.onSuccess=t,r.onError=i,"object"==typeof e&&"function"==typeof e.push&&e.length>0&&("string"==typeof e[0]||e[0]instanceof String)?r.Send({tags:e}):r.Send()},t.getStream=function(e,t,i){if(!this.apiUrl)return"function"==typeof i&&i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey&&"api"===this.keyMode)return"function"==typeof i&&i({error:"no api key set",request:{responseText:"no response error"}});var r=new n("GET",this.apiUrl+"/stream/"+e);r.header="api"===this.keyMode&&this.apiKey?{Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey}:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},r.onSuccess=t,r.onError=i,r.Send()},t.getStreams=function(e,t,i){if(!this.apiUrl)return"function"==typeof i&&i({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey&&"api"===this.keyMode)return"function"==typeof i&&i({error:"no api key set",request:{responseText:"no response error"}});if(!this.playerKey&&"player"===this.keyMode)return"function"==typeof i&&i({error:"no player key set",request:{responseText:"no response error"}});var r=new n("GET",this.apiUrl+"/stream/"+streamId),o=this.apiUrl+"/stream";if(e instanceof BintuStreamFilter){if(0===e.tags.length&&"player"===this.keyMode)return"function"==typeof i&&i({error:"no tags set",request:{responseText:"no response error"}});o+=e.getQueryString()}var r=new n("GET",o);r.header="api"===this.keyMode?{Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey}:{Accept:"application/json","Content-Type":"application/json","X-BINTU-PLAYERKEY":this.playerKey},r.onSuccess=t,r.onError=i,r.Send()},t.tagStream=function(e,t,i,r){if(!this.apiUrl)return"function"==typeof r&&r({error:"no api url set",request:{responseText:"no response error"}});if(!this.apiKey)return"function"==typeof r&&r({error:"no api key set",request:{responseText:"no response error"}});if("api"!==this.keyMode)return"function"==typeof r&&r({error:"wrong key mode set",request:{responseText:"no response error"}});if(!e)return"function"==typeof r&&r({error:"no stream id set"});var o=new n("PUT",this.apiUrl+"/stream/"+e+"/tag");o.header={Accept:"application/json","Content-Type":"application/json","X-BINTU-APIKEY":this.apiKey},o.onSuccess=i,o.onError=r,"object"==typeof t&&"function"==typeof t.push&&t.length>0&&("string"==typeof t[0]||t[0]instanceof String)?o.Send({tags:t}):o.Send()},e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[],r=function(){"use strict";function e(){this.state=this.setState(e.STATE.ALL),this.tags=[]}var t=e.prototype;return e.STATE=Object.create({LIVE:"live",CREATED:"created",ENDED:"ended",ALL:null}),t.setState=function(t){var n=void 0;for(var i in e.STATE)e.STATE[i]===t&&(n=e.STATE[i]);if("undefined"==typeof n)throw new Error("The param 'state' must be of type 'BintuStreamFilter.STATE'");return this.state=n,this},t.addTag=function(e){if(!(e.length>0&&("string"==typeof e||e instanceof String)))throw new Error("The param 'tag' must be of type 'string' and also may not be empty string.");return this.tags.push(e),this.tags=this._reduceDuplicates(this.tags),this},t.addTags=function(e){if("object"!=typeof e||"function"!=typeof e.push||!(0===e.length||e.length>0&&("string"==typeof e[0]||e[0]instanceof String)))throw new Error("The param 'tags' must be of type 'string array'");return this.tags=this.tags.concat(e),this.tags=this._reduceDuplicates(this.tags),this},t.getQueryString=function(){var e="";if("object"==typeof this.tags&&"function"==typeof this.tags.push&&this.tags.length>0)for(var t=0;t<this.tags.length;t+=1)"string"==typeof this.tags[t]&&(e+=0===t?"?":"&",e+="tags[]="+this.tags[t]);return"string"==typeof this.state&&this.state.length>0&&(e+=e.indexOf("?")===-1?"?":"&",e+="state="+this.state),e},t._reduceDuplicates=function(e){if("object"!=typeof e||"function"!=typeof e.push||!(0===e.length||e.length>0&&("string"==typeof e[0]||e[0]instanceof String)))throw new Error("The param 'tags' must be of type 'string array'");return e.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])},e}.apply(t,i),!(void 0!==r&&(e.exports=r))}]);